---
title: LLM Rules
description: Ensuring consistency when AI assistants work with this codebase
---

This system uses `CLAUDE.md` files to ensure AI assistants (Claude, GPT, etc.) maintain consistency when working across the starter template, module starter, and individual modules.

## Why LLM Rules Matter

When multiple AI sessions work on different parts of the system, inconsistencies creep in:

- Different naming conventions
- Inconsistent file structures
- Mismatched patterns between features
- Lost context about architectural decisions

The `CLAUDE.md` file provides context that persists across sessions.

## File Locations

Each layer has its own `CLAUDE.md`:

```
Starter Template (this repo)
└── CLAUDE.md              # Template-level rules

Module Starter
└── CLAUDE.md              # Module development rules

Individual Modules
└── CLAUDE.md              # Module-specific rules
```

## What to Include

### Project Overview

Start with a brief description of what this codebase does:

```markdown
## Project Overview

This is a **fullstack React + Express starter template** with:
- **Frontend**: React 19, Vite, TypeScript, Tailwind CSS v4, shadcn/ui
- **Backend**: Express.js, TypeScript, Prisma ORM
- **Database**: PostgreSQL (Neon serverless adapter)
- **Auth**: Neon Auth (JWT-based, email OTP)
```

### Architecture

Describe the structure so the AI understands where things go:

```markdown
## Architecture

### Feature-Based Structure

Both frontend and backend use feature-based architecture:

frontend/src/features/[feature]/
├── index.ts                    # Public exports
├── routes.config.tsx           # Route definitions
├── navigation.registration.ts  # Registry registration
├── components/
├── pages/
├── services/
└── hooks/
```

### Key Files

List the important files the AI should know about:

```markdown
## Key Files

| File | Purpose |
|------|---------|
| `frontend/src/routes.tsx` | Main router |
| `frontend/src/config/navigation.registry.ts` | Sidebar items |
| `backend/src/app.ts` | Express app setup |
```

### Code Conventions

Define the patterns to follow:

```markdown
## Code Conventions

### File Headers

All files should have this header:

\`\`\`typescript
// ========================================================================
// FILE: [path/from/repo/root]
// PURPOSE: [one-line description]
// ========================================================================
\`\`\`

### Imports

Order imports:
1. External packages
2. Internal absolute imports (`@/...`)
3. Relative imports
```

### Do and Don't

Clear guidance on what to avoid and what to follow:

```markdown
## Don't

- Don't modify `components/ui/` directly (shadcn components)
- Don't put business logic in route handlers (use services)
- Don't hardcode URLs (use environment variables)
- Don't skip TypeScript types

## Do

- Do follow the feature-based architecture
- Do use the registry pattern for extensibility
- Do add section dividers for organisation
- Do use the `api` client for API calls
```

### Common Tasks

Include code snippets for frequent operations:

```markdown
## Common Tasks

### Add Navigation Item

\`\`\`typescript
navigationRegistry.registerMain({
  id: 'my-feature',
  title: 'My Feature',
  url: '/my-feature',
  icon: Icon,
  order: 30,
});
\`\`\`
```

## Module-Specific Rules

When creating a module's `CLAUDE.md`, include:

### Module Context

```markdown
## Module Overview

This module provides **billing and subscription management** for apps built with the Module System starter template.

### Features

- Stripe integration
- Subscription plans
- Usage tracking
- Invoice history
```

### Integration Points

```markdown
## Integration Points

This module registers with:

- `navigationRegistry` - Adds Billing menu item
- `settingsPagesRegistry` - Adds billing settings
- `routeRegistry` - Adds /api/v1/billing endpoints
```

### Dependencies

```markdown
## Dependencies

- Requires `user` feature from starter template
- Uses Stripe SDK (`stripe` package)
- Adds `Subscription` and `Invoice` Prisma models
```

## Inheritance

Modules inherit rules from the starter template. A module's `CLAUDE.md` should:

1. **Reference parent rules** - "Follow conventions from starter template CLAUDE.md"
2. **Add specific rules** - Module-specific patterns
3. **Override when needed** - Document any deviations

Example module `CLAUDE.md` header:

```markdown
# Billing Module

This module follows conventions from the starter template. See the main CLAUDE.md for:
- Code conventions
- File headers
- Import ordering
- Registry patterns

## Module-Specific Rules

[Module-specific content here]
```

## Keeping Rules Updated

### When to Update

Update `CLAUDE.md` when you:

- Add a new registry
- Change architectural patterns
- Add new conventions
- Deprecate patterns
- Change file structure

### Version Sync

When the starter template adds new registries or patterns:

1. Update starter template's `CLAUDE.md`
2. Document in release notes
3. Module authors update their modules

## Example: Full CLAUDE.md Structure

```markdown
# Claude Instructions

This file provides guidance for AI assistants working with this codebase.

---

## Project Overview
[Brief description]

---

## Architecture
[Structure and patterns]

---

## Key Files
[Important file reference]

---

## Code Conventions
[Headers, imports, naming]

---

## Common Tasks
[Code snippets for frequent operations]

---

## Do
[Best practices]

---

## Don't
[Anti-patterns to avoid]

---

## Troubleshooting
[Common issues and solutions]
```

## Tips for AI Sessions

When starting a new AI session:

1. **Reference CLAUDE.md** - "Read CLAUDE.md first"
2. **Be specific** - "Following the registry pattern from CLAUDE.md..."
3. **Ask for consistency** - "Match the existing code style"
4. **Request file headers** - "Include the standard file header"

The AI will follow the documented patterns, resulting in consistent code across all sessions and contributors.
