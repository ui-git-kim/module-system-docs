---
title: Integration
description: How other modules can interact with the Pickers module via registries, services, and exported types
sidebar:
  order: 3
---

import { Aside, Tabs, TabItem } from '@astrojs/starlight/components';

The Pickers module is designed to be consumed by other modules. This page documents the registries, services, and public APIs available for cross-module integration.

---

## Service Registry

The Pickers backend service is registered in the `serviceRegistry` with the key `'pickers'`. Other modules can access it type-safely.

### Type Augmentation

The module declares its service type via module augmentation:

```typescript
// In pickers/service.registration.ts
declare module '../../config/service.registry.js' {
  interface ServiceTypes {
    'pickers': typeof pickersService;
  }
}
```

### Accessing the Service

From any other backend feature:

```typescript
import { serviceRegistry } from '../../config/service.registry.js';

// Type-safe access to the pickers service
const pickersService = serviceRegistry.get('pickers');

// Get all profiles
const profiles = await pickersService.getAllProfiles();

// Get a specific profile by name
const profile = await pickersService.getProfileByName('marketing-brand');

// Get the default profile
const defaultProfile = await pickersService.getDefaultProfile();
```

### Service Methods

| Method | Signature | Description |
|--------|-----------|-------------|
| `getAllProfiles` | `() => Promise<PickersProfile[]>` | List all profiles |
| `getDefaultProfile` | `() => Promise<PickersProfile \| null>` | Get the default profile |
| `getProfileByName` | `(name: string) => Promise<PickersProfile>` | Get profile by unique name |
| `getProfileById` | `(id: string) => Promise<PickersProfile>` | Get profile by ID |
| `createProfile` | `(userId: string, data: CreateInput) => Promise<PickersProfile>` | Create a new profile |
| `updateProfile` | `(id: string, data: UpdateInput) => Promise<PickersProfile>` | Update an existing profile |
| `deleteProfile` | `(id: string) => Promise<PickersProfile>` | Delete a profile |

---

## Route Registry

The Pickers API is registered in the `routeRegistry`:

```typescript
routeRegistry.register({
  path: '/pickers',
  router: pickersRoutes,
  feature: 'pickers',
  versions: ['v1'],
  requiresAuth: true,
  description: 'Pickers management',
});
```

This mounts all profile endpoints at `/api/v1/pickers/...`.

---

## Navigation Registry

The module registers a sidebar item:

```typescript
navigationRegistry.registerMain({
  id: 'pickers',
  title: 'Pickers',
  url: '/pickers',
  icon: Palette,
  order: 50,
});
```

---

## Admin Pages Registry

The module registers an admin page for profile management:

```typescript
adminPagesRegistry.register({
  id: 'pickers',
  title: 'Pickers Profiles',
  description: 'Manage picker configuration profiles',
  icon: Palette,
  component: PickersAdminPage,
  order: 50,
});
```

---

## Filter & Action Registries

The module includes template registration files for the `filterRegistry` and `actionRegistry`. By default these contain example/placeholder registrations. You can extend them to hook into system events.

### Available Filter Hook Points

Filters transform data at specific hook points (pipeline pattern):

```typescript
import { filterRegistry } from '../../config/filter.registry.js';

// Example: Enrich a user profile response with their picker preferences
filterRegistry.register(
  'api.user.profile.response',
  'pickers-enrich-profile',
  (profile, context) => {
    return {
      ...profile,
      pickerPreferences: { /* ... */ },
    };
  },
  20
);
```

### Available Action Hook Points

Actions run side effects at hook points (fire-and-forget pattern):

```typescript
import { actionRegistry } from '../../config/action.registry.js';

// Example: Create a default picker profile when a new user is created
actionRegistry.addActionAsync(
  'user.created',
  'pickers-create-defaults',
  async (context) => {
    const pickersService = serviceRegistry.get('pickers');
    await pickersService.createProfile(context.userId, {
      name: `user-${context.userId}`,
      config: {},
    });
  },
  20
);
```

---

## Frontend Exports

Other frontend features can import picker components and hooks:

```typescript
// Import components
import {
  ColorPicker,
  IconPicker,
  DatePicker,
  DateRangePicker,
  TimePicker,
  TimezonePicker,
  ImagePicker,
  EmojiPicker,
  FontPicker,
  AvatarPicker,
} from '@/features/pickers';

// Import hooks
import {
  useColorPicker,
  useIconPicker,
  usePickerProfile,
  IconRenderer,
} from '@/features/pickers';

// Import types
import type {
  ColorPickerProps,
  ColorPickerValue,
  GradientValue,
  IconPickerProps,
  DatePickerProps,
  DateRange,
  TimeValue,
  AvatarValue,
  AvatarMode,
  PickerProfile,
  PickerProfileConfig,
} from '@/features/pickers';
```

---

## Public Types

These TypeScript interfaces are exported for use by other modules:

### Core Types

```typescript
/** A named picker profile */
interface PickerProfile {
  id: string;
  name: string;
  description?: string;
  config: PickerProfileConfig;
  isDefault: boolean;
  createdAt: string;
  updatedAt: string;
}

/** Top-level profile config (optional key per picker) */
interface PickerProfileConfig {
  colorPicker?: ColorPickerConfig;
  iconPicker?: IconPickerConfig;
  datePicker?: DatePickerConfig;
  dateRangePicker?: DateRangePickerConfig;
  timePicker?: TimePickerConfig;
  timezonePicker?: TimezonePickerConfig;
  imagePicker?: ImagePickerConfig;
  emojiPicker?: EmojiPickerConfig;
  fontPicker?: FontPickerConfig;
  avatarPicker?: AvatarPickerConfig;
}
```

### Value Types

```typescript
/** ColorPicker structured value */
interface ColorPickerValue {
  type: 'solid' | 'gradient' | 'image';
  solid?: string;
  gradient?: GradientValue;
  image?: string;
}

/** Date range value */
interface DateRange {
  from: Date | null;
  to: Date | null;
}

/** Time value */
interface TimeValue {
  hours: number;
  minutes: number;
  seconds?: number;
}

/** Avatar value */
interface AvatarValue {
  type: 'upload' | 'icon' | 'initials';
  image?: string | File;
  icon?: string;
  initials?: string;
  backgroundColor?: string;
  color?: string;
}

type AvatarMode = 'upload' | 'icon' | 'initials';
```

### API Input Types

```typescript
interface CreatePickerProfileInput {
  name: string;
  description?: string;
  config: PickerProfileConfig;
  isDefault?: boolean;
}

interface UpdatePickerProfileInput {
  name?: string;
  description?: string;
  config?: Partial<PickerProfileConfig>;
  isDefault?: boolean;
}
```

---

## Integration Example

Here is an example of a hypothetical "Branding" module that uses the Pickers module to let users configure their brand identity.

### Frontend — Brand Settings Form

```tsx
// features/branding/components/BrandSettingsForm.tsx
import { useState } from 'react';
import { ColorPicker, FontPicker, IconPicker, AvatarPicker } from '@/features/pickers';
import type { ColorPickerValue, AvatarValue } from '@/features/pickers';
import { Button } from '@/components/ui/button';

export function BrandSettingsForm() {
  const [primaryColor, setPrimaryColor] = useState<string | ColorPickerValue>('#3b82f6');
  const [headingFont, setHeadingFont] = useState<string | null>('Inter');
  const [brandIcon, setBrandIcon] = useState<string | null>('Zap');
  const [avatar, setAvatar] = useState<AvatarValue | null>(null);

  const handleSave = () => {
    // Save brand settings to your backend
    console.log({ primaryColor, headingFont, brandIcon, avatar });
  };

  return (
    <div className="space-y-6">
      <ColorPicker
        value={primaryColor}
        onChange={setPrimaryColor}
        label="Primary brand colour"
        profile="marketing-brand"
        enabledTabs={['solid']}
      />
      <FontPicker
        value={headingFont}
        onChange={setHeadingFont}
        label="Heading font"
        mode="popover"
      />
      <IconPicker
        value={brandIcon}
        onChange={setBrandIcon}
        label="Brand icon"
        mode="popover"
      />
      <AvatarPicker
        value={avatar}
        onChange={setAvatar}
        label="Company avatar"
      />
      <Button onClick={handleSave}>Save brand settings</Button>
    </div>
  );
}
```

### Backend — Accessing Picker Profiles

```typescript
// features/branding/branding.service.ts
import { serviceRegistry } from '../../config/service.registry.js';

export const brandingService = {
  async getBrandProfile(profileName: string) {
    const pickersService = serviceRegistry.get('pickers');
    const profile = await pickersService.getProfileByName(profileName);
    return profile;
  },
};
```

---

## Next Steps

- [Usage](/modules/pickers/usage/) — Full component props and API reference
- [Developer Workflow](/modules/pickers/developer-workflow/) — Contributing to this module
