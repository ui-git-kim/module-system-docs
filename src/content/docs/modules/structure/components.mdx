---
title: Components & Hooks
description: Component and hook reference for the Structure module
---

import { Aside } from '@astrojs/starlight/components';

## Components

### NodeSelector

The primary integration point for other modules. Let users pick nodes in forms:

```typescript
import { NodeSelector } from '@/features/structure';

function InvoiceForm() {
  const [clientId, setClientId] = useState<string | null>(null);

  return (
    <NodeSelector
      value={clientId}
      onChange={(node) => setClientId(node?.id ?? null)}
      nodeTypes={['client']}
      placeholder="Select a client..."
    />
  );
}
```

---

### Node Components

Located in `components/node/`:

| Component | Description |
|-----------|-------------|
| `NodeIcon` | Renders the appropriate Lucide icon for a node |
| `NodeCard` | Card display using full shadcn Card API (`CardHeader`, `CardTitle`, `CardDescription`, `CardAction`, `CardContent`, `CardFooter`). Supports 5 extension positions: badge, action, header, content, footer. Reads `templateOverrides.card` config with fallback to `navigation.listPage.card`. |
| `NodeListItem` | Compact row display for list views |
| `NodeBreadcrumb` | Breadcrumb trail for node hierarchy |
| `NodeDetailHeader` | Detail page header with icon, name, favourite toggle, and action menu |
| `NodeForm` | Create/edit form for node data |
| `NodeQuickActions` | Quick action buttons for node operations |

---

### View Components

Located in `components/views/`:

| Component | Description |
|-----------|-------------|
| `NodeGrid` | Grid layout rendering NodeCards |
| `NodeList` | List layout rendering NodeListItems |

---

### Tree Components

Located in `components/tree/`:

| Component | Description |
|-----------|-------------|
| `StructureTree` | Hierarchical tree view with expand/collapse |

---

### Admin Components

Located in `components/admin/`:

| Component | Description |
|-----------|-------------|
| `NodeTypeForm` | Full configuration form for node types (accepts `mode: 'create' \| 'edit'`) |
| `CardPreview` | Live preview of node card using current form state. Shows all 5 extension slot zones as labelled placeholders. |
| `TemplateConfigPanel` | Template configuration panel with sub-tabs: Card, List, Detail, Overview, Module Integrations. Used in the Templates tab of the admin page. |
| `IconPicker` | Searchable Lucide icon picker |
| `ColorPicker` | Colour selection component |

---

### Other Components

| Component | Location | Description |
|-----------|----------|-------------|
| `NodeFieldRenderer` | `components/fields/` | Renders custom field values |
| `NodeWidgetWrapper` | `components/widgets/` | Wraps registered widgets for the Overview tab |
| `QuickCreateDropdown` | `components/toolbar/` | Header toolbar dropdown for quick node creation |

---

## Hooks

### Data Hooks

| Hook | Description |
|------|-------------|
| `useNodes(query)` | Fetch nodes with filtering, pagination, and search. Uses `useMemo` for stable query identity. |
| `useNode(id)` | Fetch a single node by ID with deep linking support |
| `useNodeMutations()` | Create, update, and delete operations with optimistic updates |
| `useNodeTree(rootId)` | Fetch hierarchical tree data using `NodeTreeItem` type |

### Registry Hooks

| Hook | Description |
|------|-------------|
| `useEnabledNodeTypes()` | All node types sorted by sortOrder. Reactive - re-renders on database sync. |
| `useNodeTabs(nodeType, node)` | Filtered tabs for a specific node |
| `useNodeWidgets(nodeType, node)` | Filtered widgets for a specific node |
| `useTemplates(type?)` | Fetch all templates, optionally filtered by type (`card`, `listItem`, `detailHeader`, `overview`) |
| `useTemplateMutations()` | Create, update, and delete template operations |

### Navigation Hooks

| Hook | Description |
|------|-------------|
| `useStructureNavItems()` | Sidebar navigation items from registered types. Reactive - re-renders on database sync. |
| `useNodeConnections(nodeId)` | Fetch connections for a node with `refetch` support |

<Aside type="tip" title="Reactivity">
The `useEnabledNodeTypes` and `useStructureNavItems` hooks subscribe to the `NodeTypeRegistry.onSync()` event internally. When node type configuration changes (e.g., an admin updates a type), these hooks automatically trigger a re-render with the latest data.
</Aside>

---

## Next Steps

- [Database & API](/modules/structure/database/) - Schema and endpoint reference
- [Registries](/modules/structure/registries/) - Registry API for extending nodes
