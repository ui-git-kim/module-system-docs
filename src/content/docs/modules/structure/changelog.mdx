---
title: Changelog
description: Version history and release notes for the Structure module
---

import { Aside } from '@astrojs/starlight/components';

This page documents notable changes to the Structure module. The module uses semantic versioning: **major.minor.patch**.

- **Major** (1.0.0 → 2.0.0): Breaking changes requiring migration
- **Minor** (1.0.0 → 1.1.0): New features, backwards compatible
- **Patch** (1.0.0 → 1.0.1): Bug fixes, template fixes

<Aside type="tip">
Check your installed version with `npx structure info`.
</Aside>

---

## v1.8.0

**Expanded Registry System**

Five new registries, customisable labels, and a Registries admin tab.

**New Registries:**
- `nodeActionRegistry` — Register action buttons and menu items for node detail headers, context menus, and bulk action bars. Supports confirmation dialogs, keyboard shortcuts, and bulk handlers.
- `nodeFieldTypeRegistry` — Register custom field types that extend the built-in field editor. Structure ships with 13 built-in types (text, textarea, number, date, datetime, select, multiselect, toggle, url, email, secret, node-reference, media) registered via `field-types.registration.ts`.
- `nodeColumnRegistry` — Register custom columns for the table view on list pages. Supports sortable columns, custom widths, alignment, compact renderers, and data prefetching.
- `nodeFilterRegistry` — Register filter controls for list pages. Supports client-side filtering (in-browser) and server-side filtering (API query params).
- `nodeSidebarSectionRegistry` — Register custom sections for the detail page sidebar. Supports collapsible sections with configurable default state.

**New Features:**
- `NodeTypeLabels` — Customisable UI strings per node type (addNew, editItem, deleteItem, archiveAction, listTitle, emptyState, searchPlaceholder, etc.)
- `getLabel()` utility — Smart label resolution with three-tier fallback: custom label → auto-generated from type name → generic default
- Registries admin tab — Browse all registered items across 8 registry types (actions, columns, filters, sidebar sections, field types, tabs, widgets, card extensions) with per-module and per-node-type filtering
- `NodeFieldRenderer` now checks the field type registry for module-provided types before falling back to built-in rendering
- `StructureModuleRegistration` expanded with 5 new optional arrays for bulk registration

**New Hooks:**
- `useNodeActions(node, nodeType)` — Filtered actions for a node with admin overrides
- `useNodeColumns(nodeType)` — Columns for a node type's table view
- `useNodeFilters(nodeType)` — Filter controls with state management (`activeFilters`, `setFilter`, `clearFilters`)
- `useNodeSidebarSections(node, nodeType)` — Sidebar sections for a node

**Admin Improvements:**
- Third top-level tab "Registries" on the App Structure admin page
- Registry Explorer in left pane showing item counts per registry type
- Detailed table view of registered items showing id, module, label, and registry-specific fields

**Backend Changes:**
- Added `NodeTypeLabels` interface to backend types
- Added `labels` property to `NodeTypeConfig` and `createNodeTypeSchema`
- Expanded `NodeTypeIntegrations` with `actions`, `columns`, `filters`, `sidebarSections`

---

## v1.7.0

**Templates, Card Slots & Admin Integrations**

**New Features:**
- Standalone reusable templates (`structure_template` table) — create once, assign to multiple node types
- 5 card extension positions aligned with shadcn Card API: `badge`, `action`, `header` (NEW), `content` (NEW), `footer`
- NodeCard restructured to use full shadcn Card components (`CardHeader`, `CardTitle`, `CardDescription`, `CardAction`, `CardContent`, `CardFooter`)
- Templates admin tab on the App Structure page — configure how nodes render across all views (Card, List, Detail, Overview)
- Admin control of module integrations — enable/disable, rename, and reorder module-provided tabs, widgets, and card extensions per node type
- Template overrides with inheritance — node types can reference standalone templates and apply local overrides
- `useTemplates` and `useTemplateMutations` hooks for template CRUD
- Template CRUD API endpoints (`GET/POST/PATCH/DELETE /api/v1/structure/templates`)

**Admin Improvements:**
- Top-level tab row on App Structure page: "Structure Types" (existing) and "Templates" (new)
- Shared left pane type list between both tabs
- Templates tab with sub-tabs: Card, List, Detail, Overview, Module Integrations
- Card slot visibility toggles with updated live CardPreview showing all 5 extension zones
- Replaced `hideTabs` text input with proper Module Integrations UI

**Registry Enhancements:**
- Tab, widget, and card extension registries now respect `integrations` config per node type
- Card extension registry `getExtensionsForNode()` accepts optional `nodeType` for admin overrides (slot reassignment, enable/disable)
- Template overrides (`templateOverrides.card`) take precedence over `navigation.listPage.card` for backward compatibility

**Schema Changes:**
- New table: `structure_template` (id, userId, name, slug, description, type, config, isDefault, sortOrder)
- New columns on `structure_node_type`: `cardTemplateId`, `listItemTemplateId`, `detailHeaderTemplateId`, `overviewTemplateId`, `templateOverrides`, `integrations`

---

## v1.6.0

**Zod Validation, Structure-Specific Hooks, and Audit Fixes**

- Zod schemas for all POST/PATCH endpoints: `createNodeSchema`, `updateNodeSchema`, `moveNodeSchema`, `reorderNodesSchema`, `createConnectionSchema`, `createNodeTypeSchema`, `updateNodeTypeSchema`
- Structure-specific filter hooks: `structure.node.beforeCreate`, `structure.node.response`, `structure.node.listQuery`
- 12 Structure-specific action hook points for cross-module integration (node CRUD, move, archive, restore, favourite, connections, node types)
- Removed `console.log` from generic backend template examples
- Fixed VERSION file sync (was `1.4.16`, now matches `1.6.0`)
- Updated package author to "Unique Icon SaaS"

---

## v1.5.4

**Standards Alignment**

- Migrated to `@/components/settings-blocks` and `@/components/page-blocks` from starter template
- Added filter and action registration files (`filter.registration.ts`, `action.registration.ts`) with generic examples
- Backend index.ts now imports filter and action registrations as side effects

---

## v1.5.0

**Comprehensive Template Cleanup and Feature Additions**

Major overhaul of all templates: bug fixes, new admin features, reactivity fixes, and code cleanup.

**New Features:**
- Card builder with live preview in admin Pages tab (`CardPreview` component)
- Configurable list page filters - admins define which fields appear as filter dropdowns
- Column configuration for table view in list pages
- Detail page navigation styles: tabs, sidebar, or none (`pageNav.style`)
- Full CRUD connections tab with `NodeSelector` dialog for creating connections
- `NodeDetailHeader` component extracted from inline detail page header

**Reactivity Fixes:**
- `NodeTypeRegistry.onSync()` now returns unsubscribe function (prevents memory leaks)
- `useEnabledNodeTypes` hook properly subscribes to onSync events and re-renders on changes
- `useStructureNavItems` hook properly subscribes to onSync events with cleanup
- `useNodes` hook uses `useMemo` for query decomposition instead of `JSON.stringify`
- `useNodeTree` uses shared `NodeTreeItem` type instead of local duplicate
- `useNodeConnections` hook supports `refetch` pattern

**Admin Improvements:**
- Explicit mode management (`list`, `create`, `edit`, `duplicate`) replaces fragile slug detection
- `NodeTypeForm` accepts `mode` prop instead of inferring from slug string
- Filterable fields configuration section in Pages tab
- Column configuration section in Pages tab

**Cleanup:**
- Removed `isEnabled` from frontend `NodeTypeConfig` interface (kept in database for future use)
- Removed unused `Filter` import from NodeListPage (re-added properly with filter implementation)
- Fixed invalid Lucide icons: `Lightning` → `Bolt`, `Magic` → `Sparkle`
- Removed unused `parentId` prop from `CreateNodeButton`
- Added `scroll-area` to shadcn/ui components
- Renamed `NodeHeader` → `NodeDetailHeader`
- Added schema comment explaining self-referential `@relation` directives

**Type Additions:**
- `card`, `columns`, `filterableFields`, `defaultSort` added to `listPage` navigation config (frontend and backend)

---

## v1.4.17

**Hooks Fix**

- Fixed Rules of Hooks violation in `useNodeTypeConfig` hook

---

## v1.4.11

**Card Custom Fields and Breadcrumbs**

- Fixed card custom fields display
- Removed standalone NodeHeader component (inlined into detail page)
- Improved breadcrumb rendering

---

## v1.4.10

**Visual Badge Picker**

- Replaced custom fields text input with visual badge picker in admin form
- Admins can now click to select which fields display on cards

---

## v1.4.9

**Admin Form Reorganisation**

- Reorganised admin form tabs - moved sidebar navigation settings to Properties tab
- Renamed "Navigation" tab to "Pages" for clarity
- Better grouping of related settings

---

## v1.4.3

**Two-Pane Admin Layout**

- Two-pane master-detail admin layout with left list and right form
- Drag-to-reorder node types with dnd-kit
- Hierarchy configuration tab with parent/child type selection

---

## v1.4.1

**Registry Alignment**

- Aligned registries with BaseRegistry pattern from starter template
- Added `mainNav` prompt for controlling primary node navigation visibility

---

## v1.4.0

**Container Node Support**

- Restored container node type with conditional template support
- `{{#if hasContainer}}` blocks for container-specific code generation
- Container types (e.g., Client) can contain primary types (e.g., Project)

---

## v1.3.8

**Connection Hook Fix**

- Fixed `NodeConnection` type in `useNodeConnections` hook

---

## v1.3.7

**Unified Update Command**

- Smart schema integration during module updates
- Rich lifecycle context for init and update operations
- Auto-initialise docs submodule during scaffold update

---

## v1.3.0 — v1.2.0

**Template Variable Substitution**

- Added `{{variableName}}` template substitution from prompt answers
- Default fallback syntax: `{{variableName|default}}`
- Conditional blocks: `{{#if variable}}...{{/if}}`
- Migrate command and version tracking

---

## v1.0.0

**Initial Release**

- Unified node model with hierarchical structure
- Dynamic navigation registration
- Tab, widget, and card extension registries
- NodeSelector component for cross-module integration
- Admin page for node type configuration
- Clean URL routing without `/structure/` prefix
- Prisma schema with materialised path for tree queries
- Full CRUD API for nodes and node types
- Built-in tabs: Overview, Info, Children, Connections, Settings

---

## Versioning

Version bumps happen via the module's version scripts:

```bash
npm run version:patch  # Bug fix (x.x.X)
npm run version:minor  # New feature (x.X.0)
npm run version:major  # Breaking change (X.0.0)
```

Any change to files in `src/templates/` or `src/module.ts` requires a version bump so that apps know updates are available.
