---
title: Usage
description: Admin page, pages, components, hooks, and settings for the Structure module
sidebar:
  order: 2
---

import { Tabs, TabItem, Aside } from '@astrojs/starlight/components';

This page covers how you use Structure day-to-day — the admin interface for configuring node types, the pages that render in the frontend, and the components and hooks available for building on top of Structure.

---

## Admin Page

The admin page provides a visual interface for managing node types and rendering templates. Access it at **Admin > App Structure**.

### Top-Level Tabs

| Tab | Purpose |
|-----|---------|
| **Structure Types** | Create and configure node types (properties, fields, hierarchy, navigation) |
| **Templates** | Configure how nodes render across views (cards, lists, detail headers, overview) and manage module integrations |
| **Registries** | Browse all registered items across all 8 registry types |

The Structure Types and Templates tabs share the same left pane type list. The Registries tab has its own Registry Explorer.

### Two-Pane Layout

The admin page uses a master-detail layout:

- **Left pane** — Compact list of all node types with drag handles for reordering, or the Registry Explorer (Registries tab)
- **Right pane** — Form editor for the selected type, template configuration, or registry item details

Node types can be reordered by dragging the grip handle on the left. The sort order affects display in navigation and list views.

### Structure Types Configuration

When editing a node type, the form is organised into tabs:

#### Basic Tab

| Field | Description |
|-------|-------------|
| Slug | URL identifier (cannot change after creation) |
| Name / Plural | Display names |
| Description | Optional description |
| Icon | Lucide icon picker with search |
| Colour | Theme colour for the type |
| Show in main navigation | Whether this type appears in the sidebar |
| Navigation order | Position in the sidebar |

#### Properties Tab

Configure entry-level features:

| Feature | Description |
|---------|-------------|
| Custom Slug | Allow entries to have custom URL-friendly slugs |
| Custom Colour | Allow entries to have their own colour |
| Custom Icon | Allow entries to choose their own icon |
| Favourites | Allow users to mark entries as favourites |
| Archiving | Allow entries to be archived instead of deleted |
| Publishing | Enable draft/published workflow |
| Manual Sort | Allow drag-and-drop reordering |

#### Fields Tab

Define custom data fields for nodes of this type. Each field has a label, type, optional placeholder, required toggle, description, width (full or half), and type-specific options.

**Supported field types:** Text, Text Area, Number, Date, Date & Time, Select, Multi-Select, URL, Email, Toggle, Secret (masked), Media (file uploads), Node Reference

#### Hierarchy Tab

Configure parent/child relationships:

- **Can be created standalone** — exists at root level without a parent
- **Can be nested inside same type** — self-referential nesting
- **Allowed Parent Types** — click badges to toggle which types can contain this one
- **Allowed Child Types** — click badges to toggle which types this one can contain
- **Maximum Depth** — limit hierarchy depth (blank = unlimited)

<Aside type="caution">
If an entry type cannot be created standalone and has no allowed parent types, users won't be able to create entries of that type.
</Aside>

#### Pages Tab

Configure navigation, card display, and list page settings:

**Sidebar Entries:** Show in sidebar, section label, max entries, sort by, filters (favourites, recent, all).

**Card Display with Live Preview:** Toggle description, icon, colour, and custom field badges. A live `CardPreview` renders beside the settings so you see changes in real time.

**Page Navigation:** Choose between Tabs, Sidebar, or None layout. Set the default tab. Toggle visibility of built-in tabs (Overview, Info, Children, Connections, Settings).

**List Page:** Default view (Grid, List, Table), default sort, search toggle, filter controls, filterable fields, and column definitions for table view.

<Aside type="note">
Only **select** and **multi-select** field types can be used as filter dropdowns. The list page automatically renders a dropdown for each filterable field.
</Aside>

#### Integrations Tab

Control module-provided content per node type. You can enable/disable, rename, and reorder module-provided tabs, widgets, and card extensions.

### Templates Tab

Configure how nodes render across views. Select a type from the left pane to see its template configuration.

| Sub-tab | Purpose |
|---------|---------|
| **Card** | Card display in grid views — visibility toggles, extension slot management, live preview |
| **List** | List item display — icon, description, colour visibility |
| **Detail** | Detail page header — breadcrumb, icon, description, favourite, action buttons |
| **Overview** | Overview tab layout — single or two-column widget arrangement |
| **Module Integrations** | Control module tabs, widgets, and card extensions per type |

Templates can also be created as standalone, reusable entities via the API. A template defines rendering configuration for one view type and can be assigned to multiple node types with local overrides.

### Registries Tab

Browse all registered items across 8 registry types: Actions, Columns, Filters, Sidebar Sections, Field Types, Tabs, Widgets, and Card Extensions. Each item shows its ID, owning module, label, target node types, and registry-specific fields.

---

## Pages

### Frontend Routes

| Path | Component | Description |
|------|-----------|-------------|
| `/:nodeType` | `NodeListPage` | List view with filtering |
| `/:nodeType/:nodeId` | `NodeDetailPage` | Detail page with default tab |
| `/:nodeType/:nodeId/:tabId` | `NodeDetailPage` | Direct tab deep link |

<Aside type="note">
Routes use catch-all patterns inserted at the end of the route table, so more specific routes from other modules take precedence.
</Aside>

### Detail Pages

When a user navigates to a node (e.g., `/clients/abc123`), they see a detail page with:

1. **Header** (`NodeDetailHeader`) — Node icon, name, favourite toggle, and dropdown menu
2. **Breadcrumbs** — Dynamic breadcrumbs showing `Type (plural) > Node Name`
3. **Navigation** — Style depends on node type configuration
4. **Tab Content** — The selected tab's content

#### Navigation Styles

| Style | Layout | Best For |
|-------|--------|----------|
| **Tabs** | Horizontal tab bar above content | Few tabs, quick switching |
| **Sidebar** | Left navigation panel with right content | Many tabs, complex layouts |
| **None** | Single content area | Simple nodes with one view |

#### Built-in Tabs

| Tab | Description |
|-----|-------------|
| **Overview** | Dashboard-style widgets from various modules |
| **Info** | Custom fields defined for this node type |
| **Children** | Child nodes with create/reorder support |
| **Connections** | Related nodes via the connection system (create, view, delete) |
| **Settings** | Node-specific settings |

All tabs can be hidden per node type via the admin panel.

### List Pages

Each node type gets a list page at `/:nodeType` with three display modes:

| View | Description |
|------|-------------|
| **Grid** | Card-based layout with configurable card content |
| **List** | Compact row-based layout |
| **Table** | Column-based table (uses configured columns) |

List pages support search, filtering by field values (select/multi-select fields), and sorting.

---

## Components

### NodeSelector

The primary integration point for other modules. Let users pick nodes in forms:

```typescript
import { NodeSelector } from '@/features/structure';

function InvoiceForm() {
  const [clientId, setClientId] = useState<string | null>(null);

  return (
    <NodeSelector
      value={clientId}
      onChange={(node) => setClientId(node?.id ?? null)}
      nodeTypes={['client']}
      placeholder="Select a client..."
    />
  );
}
```

### Node Components

| Component | Description |
|-----------|-------------|
| `NodeIcon` | Renders the appropriate Lucide icon for a node |
| `NodeCard` | Card display using full shadcn Card API with 5 extension positions |
| `NodeListItem` | Compact row display for list views |
| `NodeBreadcrumb` | Breadcrumb trail for node hierarchy |
| `NodeDetailHeader` | Detail page header with icon, name, favourite toggle, action menu |
| `NodeForm` | Create/edit form for node data |
| `NodeQuickActions` | Quick action buttons for node operations |

### View Components

| Component | Description |
|-----------|-------------|
| `NodeGrid` | Grid layout rendering NodeCards |
| `NodeList` | List layout rendering NodeListItems |
| `StructureTree` | Hierarchical tree view with expand/collapse |

### Admin Components

| Component | Description |
|-----------|-------------|
| `NodeTypeForm` | Configuration form with 6 tabs (Basic, Properties, Fields, Hierarchy, Pages, Integrations) |
| `CardPreview` | Live preview of node card using current config |
| `TemplateEditor` | Standalone template create/edit form |
| `IconPicker` | Searchable Lucide icon picker |
| `ColorPicker` | Colour selection component |

### Other Components

| Component | Description |
|-----------|-------------|
| `NodeFieldRenderer` | Renders custom field values. Checks `nodeFieldTypeRegistry` for module-provided types before falling back to built-in rendering. |
| `NodeWidgetWrapper` | Wraps registered widgets for the Overview tab |
| `QuickCreateDropdown` | Header toolbar dropdown for quick node creation |

---

## Hooks

### Data Hooks

| Hook | Description |
|------|-------------|
| `useNodes(query)` | Fetch nodes with filtering, pagination, and search |
| `useNode(id)` | Fetch a single node by ID |
| `useNodeMutations()` | Create, update, and delete with optimistic updates |
| `useNodeTree(rootId)` | Fetch hierarchical tree data |

### Registry Hooks

| Hook | Description |
|------|-------------|
| `useEnabledNodeTypes()` | All node types sorted by sortOrder. Reactive — re-renders on database sync. |
| `useNodeTabs(nodeType, node)` | Filtered tabs for a specific node |
| `useNodeWidgets(nodeType, node)` | Filtered widgets for a specific node |
| `useNodeActions(node, nodeType)` | Filtered action buttons with admin overrides |
| `useNodeColumns(nodeType)` | Table view columns, sorted by order |
| `useNodeFilters(nodeType)` | Filter controls with state management |
| `useNodeSidebarSections(node, nodeType)` | Sidebar sections for a node |
| `useTemplates(type?)` | Fetch templates, optionally filtered by type |
| `useTemplateMutations()` | Template CRUD operations |

### Navigation Hooks

| Hook | Description |
|------|-------------|
| `useStructureNavItems()` | Sidebar nav items from registered types. Reactive — re-renders on database sync. |
| `useNodeConnections(nodeId)` | Fetch connections for a node with `refetch` support |

<Aside type="tip" title="Reactivity">
The `useEnabledNodeTypes` and `useStructureNavItems` hooks subscribe to `NodeTypeRegistry.onSync()` internally. When an admin updates a node type, these hooks trigger a re-render automatically.
</Aside>

---

## Settings Page

Structure registers a user-facing settings page at `/settings/structure`. Users can configure their display preferences:

| Setting | Description |
|---------|-------------|
| Default View | Grid or List view for list pages |
| Show Favourites | Display favourite nodes in the sidebar |
| Sidebar Collapsed | Default sidebar state |
| Show Item Counts | Display counts beside sidebar sections |

Settings are stored in the `structure_settings` table and read via the settings API.

---

## Labels Utility

Customise UI text for each node type using the labels system:

```typescript
import { getLabel } from '@/features/structure';

const label = getLabel(nodeType, 'addNew');
// "Add Client" (auto-generated) or "Create New Matter" (custom label)
```

The `getLabel()` function checks three sources in order:

1. **Custom label** — from `nodeType.labels.addNew` if defined
2. **Auto-generated** — creates a sensible default from the type name
3. **Fallback** — returns a generic default

### Available Label Keys

| Key | Default Pattern | Example (type: "Client") |
|-----|----------------|--------------------------|
| `addNew` | `Add {name}` | "Add Client" |
| `editItem` | `Edit {name}` | "Edit Client" |
| `deleteItem` | `Delete {name}` | "Delete Client" |
| `archiveAction` | `Archive {name}` | "Archive Client" |
| `restoreAction` | `Restore {name}` | "Restore Client" |
| `listTitle` | `{namePlural}` | "Clients" |
| `emptyState` | `No {namePlural} yet` | "No Clients yet" |
| `searchPlaceholder` | `Search {namePlural}...` | "Search Clients..." |
| `createFirst` | `Create your first {name}` | "Create your first Client" |
| `confirmDelete` | `Are you sure...` | "Are you sure you want to delete this Client?" |

Labels are configured per node type in the admin panel or programmatically via the `labels` property on `NodeTypeConfig`.

---

## Next Steps

- [Integration](/modules/structure/integration/) — How other modules extend Structure
- [Developer Workflow](/modules/structure/developer-workflow/) — Setup, building, testing, and versioning
- [Configuration](/modules/structure/configuration/) — Database schema and API reference
