---
title: Node Types
description: Understanding, creating, and configuring node types
---

import { Aside } from '@astrojs/starlight/components';

A **node type** defines a category of entity in your app. Each type has:

- **Name** - Display name (e.g., "Client", "Project", "Matter")
- **Icon** - Lucide icon for navigation and cards
- **Colour** - Theme colour for visual distinction
- **Rules** - What can contain it, what it can contain
- **Features** - Which features are enabled (favourites, archiving, etc.)
- **Fields** - Custom data fields (stored as JSON)
- **Navigation** - How it appears in sidebar, list pages, and detail pages

---

## Default Types

The installer creates default types based on your prompts. All types are active by default and can be modified in the [Admin Page](/modules/structure/admin/) or via code.

---

## Creating Types Programmatically

Other modules can register their own node types via the backend service:

```typescript
import { structureService } from '@/features/structure';

await structureService.createNodeType({
  slug: 'invoice',
  name: 'Invoice',
  namePlural: 'Invoices',
  icon: 'FileText',
  moduleId: 'billing',
  rules: {
    allowedParents: ['client'],
    allowedChildren: [],
  },
  features: {
    canFavorite: false,
    canArchive: true,
  },
  fields: [
    { id: 'amount', type: 'number', label: 'Amount' },
    { id: 'dueDate', type: 'date', label: 'Due Date' },
  ],
});
```

---

## Configuration Interface

The full configuration shape for a node type:

```typescript
interface NodeTypeConfig {
  slug: string;
  name: string;
  namePlural: string;
  description?: string;
  icon: string;
  color?: string;
  moduleId?: string;
  isSystem: boolean;
  sortOrder: number;
  rules: NodeTypeRules;
  features: NodeTypeFeatures;
  fields: NodeTypeField[];
  navigation: NodeTypeNavigation;
}
```

### Rules

```typescript
interface NodeTypeRules {
  allowedParents?: string[];
  allowedChildren?: string[];
  canBeRoot?: boolean;
  canNestSameType?: boolean;
  canContainSameType?: boolean;
  maxDepth?: number;
}
```

### Features

```typescript
interface NodeTypeFeatures {
  canFavorite?: boolean;
  canArchive?: boolean;
  canPublish?: boolean;
  canManualSort?: boolean;
  customSlug?: boolean;
  customColor?: boolean;
  customIcon?: boolean;
}
```

### Navigation

```typescript
interface NodeTypeNavigation {
  mainNav?: {
    enabled?: boolean;
    order?: number;
    icon?: string;
  };
  sidebarNav?: {
    style?: 'list' | 'tree';
    showEmpty?: boolean;
    maxItems?: number;
    sortBy?: string;
    filter?: string;
    label?: string;
  };
  pageNav?: {
    style?: 'tabs' | 'sidebar' | 'none';
    tabs?: {
      overview?: boolean | { label?: string };
      info?: boolean | { label?: string };
      children?: boolean | { label?: string };
      connections?: boolean | { label?: string };
      settings?: boolean | { label?: string };
    };
    tabOrder?: string[];
    hideTabs?: string[];
    defaultTab?: string;
  };
  listPage?: {
    defaultView?: 'grid' | 'list' | 'table';
    defaultSort?: string;
    showFilters?: boolean;
    showSearch?: boolean;
    groupBy?: string;
    card?: {
      showDescription?: boolean;
      showIcon?: boolean;
      showColor?: boolean;
      showFields?: string[];
    };
    columns?: Array<{
      fieldId: string;
      label?: string;
      width?: string;
      sortable?: boolean;
    }>;
    filterableFields?: string[];
  };
}
```

### Fields

```typescript
interface NodeTypeField {
  id: string;
  type: string;
  label: string;
  description?: string;
  placeholder?: string;
  required?: boolean;
  options?: Array<{ label: string; value: string }>;
  validation?: {
    min?: number;
    max?: number;
    pattern?: string;
    message?: string;
  };
  order?: number;
  section?: string;
  width?: 'full' | 'half';
}
```

**Supported field types:** Text, Text Area, Number, Date, Date & Time, Select, Multi-Select, URL, Email, Toggle (boolean), Secret (masked), Media (file uploads), Node Reference

---

## isSystem Flag

When `isSystem` is true, the node type is protected from user editing in the admin panel. System types are typically registered by modules during initialisation.

<Aside type="note">
The `isSystem` flag prevents accidental modification of types that other modules depend on. Admins can still view system types but cannot change their core configuration.
</Aside>

---

## Node Type Registry

Node types are managed through a custom registry that syncs from the database. Unlike other registries, `NodeTypeRegistry` does **not** extend `BaseRegistry` because it needs database synchronisation.

See the [Registries](/modules/structure/registries/) page for full details on the registry API.

---

## Next Steps

- [Admin Page](/modules/structure/admin/) - Visual configuration interface
- [Pages](/modules/structure/pages/) - How node types render in list and detail views
- [Registries](/modules/structure/registries/) - NodeTypeRegistry API and reactive hooks
