---
title: Roadmap
description: Planned features and future direction for the Structure module
---

import { Aside, Card, CardGrid } from '@astrojs/starlight/components';

This page outlines planned features and improvements for the Structure module. Items are grouped by priority.

<Aside type="note">
This roadmap reflects current plans and may change based on feedback and requirements from other modules.
</Aside>

---

## In Progress

Features currently being developed or designed.

### Table View for List Pages

**Status:** Foundations laid (column config exists)

The list page already supports grid and list views. Table view adds a column-based display:

- Column definitions configured per node type in admin
- Sortable columns with header click
- Field-based column rendering
- Responsive handling for narrow viewports

---

## Planned

Features planned for upcoming releases.

### Advanced Filtering

**Priority:** High

Expand filtering beyond select/multi-select dropdowns:

- Text field search filters
- Date range filters
- Number range filters
- Saved filter presets per user
- Filter state persisted in URL params

### Bulk Operations

**Priority:** High

Select multiple nodes and perform operations:

- Multi-select with checkboxes in list/grid views
- Bulk archive, delete, move operations
- Bulk field updates
- Select all / deselect all

### Node Templates

**Priority:** Medium

Pre-configured node templates for quick creation:

- Admin defines templates per node type
- Templates pre-fill fields, set defaults
- Users pick a template when creating a new node
- Template marketplace (share across apps)

### Published Nodes

**Priority:** Medium

Complete the publishing workflow:

- Draft/published state management
- Public URL generation with `publishedSlug`
- Public-facing read-only view
- Publish/unpublish actions in detail page
- Scheduled publishing

### Tree View Improvements

**Priority:** Medium

Enhanced hierarchical navigation:

- Inline node creation in tree view
- Drag-and-drop reparenting in tree
- Expand/collapse state persistence per user
- Tree search and filtering
- Keyboard navigation

### Custom Detail Page Layouts

**Priority:** Medium

Allow admins to configure detail page content beyond tabs:

- Custom widget placement on Overview tab
- Configurable info page sections
- Conditional sections based on field values
- Custom CSS/theme per node type

---

## Known Issues

Issues identified during production readiness review that need to be addressed.

### No Query Parameter Validation on GET Endpoints

**Severity:** Critical

GET `/nodes` accepts arbitrary `limit`, `sortBy`, and other parameters without validation. A malicious `limit=999999` could fetch the entire database. `sortBy` accepts arbitrary strings.

- Add Zod schema for query parameters
- Cap `limit` to a reasonable max (e.g., 100)
- Validate `sortBy` against allowed columns

### No Admin Role Check on Type Management Endpoints

**Severity:** Critical

Node type CRUD endpoints (`POST/PATCH/DELETE /types`) only require authentication — any authenticated user can create, modify, or delete node types which are system-level configuration.

- Add admin role middleware to type management endpoints
- Apply same guard to template management endpoints

### No Transaction on moveNode — Race Condition Risk

**Severity:** High

When moving a node, the parent update and descendant path updates are separate queries with no transaction. Concurrent moves could leave paths inconsistent. `updateDescendantPaths` also loops with individual update calls (N+1).

- Wrap `moveNode` in `prisma.$transaction()`
- Replace descendant path loop with batched update

### Unsafe Spread in updateNode Service

**Severity:** High

`updateNode` spreads user input directly into `prisma.structure_node.update()`. Should use an explicit allowlist of fields instead.

### Orphaned Connections on Node Deletion

**Severity:** High

When soft-deleting a node, connections (stored as `nodeType='connection'`) referencing deleted nodes are not cleaned up. Orphaned connection records accumulate.

- Soft-delete connections where `fromNodeId` or `toNodeId` matches deleted nodes

### No Delete Confirmation in Settings Tab

**Severity:** High

The "Delete" button in `NodeSettingsTab` danger zone immediately executes deletion with no confirmation dialog. A misclick permanently deletes a node and all descendants.

- Add confirmation dialog matching the pattern used in the admin page

---

## Planned Improvements

Improvements identified during production readiness review, ranked by impact.

### User-Facing Error Toasts on Mutation Failure

**Priority:** High

Mutations catch errors and set state, but no toast or notification is shown to the user. Some components (`NodeConnectionsTab`, `NodeSettingsTab`) only log to console.

### Sequential N+1 in reorderNodes

**Priority:** High

`reorderNodes` loops through node IDs with individual `updateMany` calls. Should batch within a transaction.

### getNodeType N+1 Template Lookups

**Priority:** Medium

Single node type fetch makes up to 4 separate template lookups. Should batch with `findMany` + `in`, matching the pattern already used in `listNodeTypes`.

### Server-Side Field Filtering

**Priority:** Medium

Field filters on the list page are applied client-side after fetching. Should pass filter parameters to the API and apply in Prisma query.

### Search Input Debouncing

**Priority:** Medium

Search input fires a new API request on every keystroke. Should debounce (300-500ms).

### Registry isEnabled Filter

**Priority:** Low

`getEnabledTypes()` in the frontend registry returns all types without checking `isEnabled`. Should add `.filter(c => c.isEnabled !== false)`.

### Auto-Save Debouncing on Info Tab

**Priority:** Low

`NodeInfoTab` calls `updateNode` immediately on every field change. Should debounce or use explicit save.

### Two-Step createNode Optimisation

**Priority:** Low

`createNode` creates with `path: ''` then immediately updates with the correct path. Should generate UUID first and create in one call.

---

## Under Consideration

Ideas being evaluated for feasibility and demand.

### Node Versioning

Track changes to node data over time:

- Version history for field changes
- Diff view between versions
- Restore to previous version
- Audit trail per node

### Computed Fields

Fields that derive their value from other fields or related data:

- Formula fields (concatenation, arithmetic)
- Aggregation fields (count children, sum values)
- Lookup fields (pull from connected nodes)
- Auto-refresh on dependency changes

### Import/Export

Bulk data management:

- CSV import for node creation
- CSV/JSON export of node lists
- Field mapping during import
- Validation and error reporting

### Node Permissions

Granular access control per node:

- Owner, editor, viewer roles per node
- Inherit permissions from parent
- Share individual nodes with specific users
- Permission checks in API and UI

### Workflow Automation

Trigger actions based on node state changes:

- Status change triggers (e.g., archived → notify)
- Field value triggers (e.g., due date approaching)
- Integration with action registry
- Configurable via admin panel

---

## Completed

Features that have been implemented and released.

| Feature | Version | Description |
|---------|---------|-------------|
| Zod validation, Structure hooks, audit fixes | v1.6.0 | Zod schemas for all POST/PATCH routes, Structure-specific filter/action hooks, console.log cleanup, VERSION sync, author metadata |
| Standards alignment | v1.5.4 | Migrate to settings-blocks, page-blocks, Zod validation, filter/action registrations |
| Scaffold update to v1.4.16 | v1.5.3 | Space-separated placeholders, docs submodule fixes |
| Card builder with live preview | v1.5.0 | Admin card configuration with CardPreview component |
| List page filtering | v1.5.0 | Admin-configured filter dropdowns for select fields |
| Detail page navigation styles | v1.5.0 | Tabs, sidebar, or none layouts |
| Full connections CRUD | v1.5.0 | Create, view, delete connections with NodeSelector |
| Registry reactivity fixes | v1.5.0 | Proper onSync subscriptions in hooks |
| Two-pane admin layout | v1.4.3 | Master-detail with drag-to-reorder |
| Visual badge picker | v1.4.10 | Click-to-select card field display |
| Container node support | v1.4.0 | Conditional container types |
| Template variable substitution | v1.3.0 | Dynamic template placeholders |
| Initial release | v1.0.0 | Full node system with registries |

---

## Related Roadmaps

- [Module Roadmap](/modules/roadmap/) — Complete inventory of all modules: active, planned, and under consideration
- [Starter Template Roadmap](/starter-template/roadmap/) — Planned features for the core template
- [Module Starter Roadmap](/module-starter/roadmap/) — Planned features for the scaffolding tool

---

## Contributing Ideas

Have a feature request or improvement idea?

1. **Check existing items** - Review this roadmap and the [module repository](https://github.com/ui-git-kim/structure)
2. **Open an issue** - Describe the feature and use cases
3. **Discuss** - Engage with feedback to refine the proposal

<Aside type="tip">
When proposing features, consider how they integrate with the registry system. Features that other modules can extend through registries are preferred.
</Aside>
