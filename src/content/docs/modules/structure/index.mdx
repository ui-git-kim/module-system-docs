---
title: Structure Module
description: Hierarchical organisation and navigation skeleton for SaaS applications
sidebar:
  order: 0
---

import { Steps, Tabs, TabItem, FileTree, Card, CardGrid, Aside } from '@astrojs/starlight/components';

The **Structure** module provides the organisational backbone for your SaaS application. You define **node types** that represent the core entities users work with — clients, projects, matters, properties — and Structure gives each one a detail page with tabs, widgets, and actions that other modules can extend.

<Aside type="tip" title="Think of it like this">
Structure is like a filing cabinet system. You decide what goes in the cabinet (Clients? Workspaces? Cases?), how things are organised (folders, tags), and other modules add functionality to each item (billing adds invoices, tasks adds task lists, etc.).
</Aside>

## Quick Install

```bash
npx structure init
```

The CLI walks you through installation — it creates database tables, generates frontend and backend code, installs shadcn components, and seeds default node types based on your answers. See the [Configuration](/modules/structure/configuration/) page for full details.

---

## Key Features

<CardGrid>
  <Card title="Unified Nodes" icon="document">
    Everything is a node — your entities, folders, tags, and connections all share one flexible model.
  </Card>
  <Card title="Hierarchical" icon="list-format">
    Nodes can contain other nodes with parent/child relationships and materialised paths for fast tree queries.
  </Card>
  <Card title="Extensible" icon="puzzle">
    Nine internal registries let other modules add tabs, widgets, actions, columns, filters, sidebar sections, card extensions, and field types.
  </Card>
  <Card title="Clean URLs" icon="external">
    Routes like `/clients/:id` — no `/structure/` prefix. Node types auto-register in the sidebar.
  </Card>
</CardGrid>

### Full Feature List

- Unified node model — everything is a node (projects, folders, tags, connections)
- Hierarchical structure with materialised path for efficient tree queries
- Dynamic navigation — node types auto-register in sidebar
- 9 extensible registries — other modules add tabs, widgets, card extensions, actions, columns, filters, sidebar sections, and field types
- Built-in tabs (Overview, Info, Children, Connections, Settings) — all optional per type
- 13 built-in field types (text, textarea, number, date, datetime, select, multiselect, toggle, url, email, secret, node-reference, media)
- Standalone reusable templates — create once, assign to multiple node types with local overrides
- Admin panel with visual card builder, live preview, and template configuration
- Configurable list pages with filtering, search, and multiple view modes (grid, list, table)
- Configurable detail pages with tabs, sidebar, or no-navigation layouts
- Full connection system for node-to-node relationships
- NodeSelector component for cross-module integration
- Clean URLs without `/structure/` prefix
- Favourites, archiving, and publishing support
- Drag-and-drop reordering with sort order persistence
- User-specific settings page at `/settings/structure`
- 16 backend action hooks for cross-module event handling
- 4 backend filter hooks for data transformation pipelines
- Structured Pino logging for all mutations
- Lifecycle hooks (onInstall, onUpdate)
- Customisable UI labels per node type with `getLabel()` utility

---

## Architecture

### Everything Is a Node

Structure uses a **unified node model**. Every entity in your application — whether it's a client, a project, a folder, or a tag — is stored in the same `structure_node` table. The `nodeType` field determines what kind of entity it is, and the node type configuration controls how it behaves.

### Hierarchical Organisation

Nodes can contain other nodes through parent/child relationships. Structure uses **materialised paths** (e.g., `/grandparentId/parentId/selfId`) for efficient tree queries. This lets you build deep hierarchies without recursive database calls.

### Registry-Based Extensibility

Structure exposes **nine internal registries** that other modules use to extend nodes:

| Registry | Purpose |
|----------|---------|
| `nodeTypeRegistry` | Node type configurations (DB-synced) |
| `nodeTabRegistry` | Tabs on detail pages |
| `nodeWidgetRegistry` | Widgets on the Overview tab |
| `nodeCardExtensionRegistry` | Badges, actions, and content on cards |
| `nodeActionRegistry` | Action buttons on nodes |
| `nodeFieldTypeRegistry` | Custom field types |
| `nodeColumnRegistry` | Table view columns |
| `nodeFilterRegistry` | List page filter controls |
| `nodeSidebarSectionRegistry` | Detail page sidebar sections |

### Backend Hooks

The service fires **16 action hooks** after every mutation (node created, updated, deleted, moved, archived, etc.) and applies **4 filter hooks** at key pipeline points (before create, response enrichment, query modification, node type response). Other modules subscribe to these hooks via the starter template's `actionRegistry` and `filterRegistry`.

---

## Examples

### Legal Practice

```
Node Types:
├── Client (container)     → /clients
│   └── Matter (primary)   → /clients/:clientId
│       ├── Folder         → organise documents
│       └── Tag            → categorise (e.g., "Litigation", "Contract")

Node Detail Page (/clients/abc123):
├── Overview tab      ← Structure module (widgets from other modules)
├── Info tab          ← Structure module (custom fields)
├── Matters tab       ← Structure module (child nodes)
├── Invoices tab      ← Billing module (adds this tab)
├── Documents tab     ← Documents module (adds this tab)
└── Settings tab      ← Structure module (node settings)
```

### Project Management

```
Node Types:
├── Project (primary)      → /projects
│   ├── Folder             → organise work
│   └── Tag                → categorise (e.g., "Active", "On Hold")

Node Detail Page (/projects/xyz789):
├── Overview tab      ← Structure module
├── Tasks tab         ← Tasks module (adds this tab)
├── Time tab          ← Time Tracking module (adds this tab)
├── Files tab         ← Files module (adds this tab)
└── Settings tab      ← Structure module
```

---

## Generated Files

<Tabs>
  <TabItem label="Frontend">
    <FileTree>
    - src/features/structure/
      - index.ts
      - routes.config.tsx
      - types/ (node.types, node-type.types, registry.types)
      - config/ (9 registries + structure registry)
      - services/ (structure.service)
      - hooks/ (useNodes, useNode, useNodeMutations, useNodeTypes, useNodeTree, useTemplates, etc.)
      - components/
        - node/ (NodeIcon, NodeCard, NodeDetailHeader, NodeForm, etc.)
        - selectors/ (NodeSelector)
        - tree/ (StructureTree)
        - views/ (NodeGrid, NodeList)
        - fields/ (NodeFieldRenderer)
        - widgets/ (NodeWidgetWrapper)
        - toolbar/ (QuickCreateDropdown)
        - tabs/ (Overview, Info, Children, Connections, Settings)
        - admin/ (NodeTypeForm, CardPreview)
        - common/ (IconPicker, ColorPicker)
      - pages/ (NodeListPage, NodeDetailPage, StructureSettingsPage, admin/)
      - registrations/ (tabs, navigation, routes, toolbar, types, fields, admin, settings-pages)
      - utils/ (labels)
    </FileTree>
  </TabItem>
  <TabItem label="Backend">
    <FileTree>
    - src/features/structure/
      - index.ts
      - structure.routes.ts
      - structure.service.ts
      - structure.types.ts (includes Zod schemas)
      - structure.init.ts
      - route.registration.ts
      - service.registration.ts
      - filter.registration.ts
      - action.registration.ts
    </FileTree>
  </TabItem>
</Tabs>

---

## Commands

```bash
npx structure init              # Install module
npx structure init --force      # Force overwrite existing files
npx structure uninstall         # Remove module
npx structure update            # Update to latest templates
npx structure update --skip-schema  # Update templates only
npx structure info              # Show module info
```

---

## Dependencies

**shadcn/ui components** (installed automatically):

`alert` `badge` `button` `card` `collapsible` `command` `dialog` `dropdown-menu` `input` `label` `popover` `scroll-area` `select` `skeleton` `switch` `tabs` `textarea` `tooltip`

**npm packages:** `react-hook-form`

---

## Next Steps

- [Configuration](/modules/structure/configuration/) — Installation prompts, database schema, API endpoints, and node type configuration
- [Usage](/modules/structure/usage/) — Admin page, pages, components, hooks, and settings
- [Integration](/modules/structure/integration/) — How other modules extend Structure with tabs, widgets, hooks, and more
- [Developer Workflow](/modules/structure/developer-workflow/) — Setup, building, testing, versioning, and documentation
- [Changelog](/modules/structure/changelog/) — Version history and release notes
- [Roadmap](/modules/structure/roadmap/) — Planned features and future direction
