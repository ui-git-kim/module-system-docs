---
title: Block Builder
description: Visual component builder with drag-and-drop canvas, property panels, and code generation
sidebar:
  order: 0
---

import { Aside, Card, CardGrid, Tabs, TabItem } from '@astrojs/starlight/components';

The **Block Builder** module provides a visual component builder for useFoundryUI. You drag components onto a canvas, configure their properties, preview the result live, and save blocks that generate shadcn-compatible registry JSON — ready to install into any project with `npx shadcn add`.

<Aside type="note">
This module requires the [Structure](/modules/structure/) module for project integration (organising blocks into projects, per-project registry URLs).
</Aside>

## Quick Install

```bash
npx builder init
```

The CLI walks you through installation — it creates database tables, generates frontend and backend code, installs shadcn components, and seeds default configuration.

---

## Key Features

<CardGrid>
  <Card title="Drag-and-Drop Canvas" icon="pencil">
    Build component trees visually using `@dnd-kit` with nested drop support, sortable children, and smooth animations.
  </Card>
  <Card title="Live Preview" icon="laptop">
    See your block rendered in real time using pristine shadcn components. Switch between desktop, tablet, and mobile viewports.
  </Card>
  <Card title="Property Panel" icon="setting">
    Edit every component property through auto-generated fields — text, select, checkbox, number, icon picker, className, and more.
  </Card>
  <Card title="Code Generation" icon="document">
    Generate clean React component code from your block tree, with proper imports, props, and shadcn patterns.
  </Card>
</CardGrid>

### Full Feature List

- Drag-and-drop canvas with `@dnd-kit/core` and `@dnd-kit/sortable`
- Component palette (containers, elements, composites, primitives)
- Property panel with generic field types (string, number, boolean, select, icon, textarea, className)
- Block tree state management with immutable updates
- Code preview and generation
- Responsive device preview (desktop/tablet/mobile)
- Save/load blocks via API with automatic changelog history
- Database-driven native component registry with seed data
- Block categories (user-created folders for organisation)
- Block collections (multi-block compositions with entry point designation)
- Dashboard widget for quick access
- Header toolbar "Save Block" button integration
- Auto-collapse sidebar when in builder
- Project-scoped blocks with per-project shadcn namespace
- Global blocks available across all projects
- System blocks (admin-created templates available to all users)
- Structure module integration (tabs, widget, card badge, lifecycle hooks)
- Blocks Library page with grid/list views, scope filtering, and search
- Block duplicate and edit-in-place with changelog tracking
- Admin page for native component management (admin role only)
- Config-driven code generation via `codePlacement`, `codeAlias`, and `codeFormat` property fields
- Shared field templates for consistent property definitions across components

---

## Architecture

The builder follows a **config-driven** approach. Block types are defined in a database-driven component registry (`native_component` table), not hardcoded. This means you can add, remove, or modify available components without touching code.

### Component Categories

| Category | Can Have Children? | Examples |
|----------|-------------------|----------|
| **Containers** | Yes | Card, Dialog, Accordion, ScrollArea |
| **Elements** | No | Button, Input, Badge, Avatar |
| **Child** | Varies | CardHeader, AccordionItem (parent-scoped) |
| **Primitives** | Varies | Div, Icon, Span |

### How It Fits Together

```
┌─────────────────────────────────────────────────────────────┐
│  Starter Template App                                       │
│                                                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  Structure    │  │   Builder    │  │  Builder     │     │
│  │  Module       │◄─┤   Module     │  │  Logic       │     │
│  │  (projects)   │  │  (canvas,    │  │  (future)    │     │
│  └──────────────┘  │   panels,    │  └──────────────┘     │
│                     │   registry)  │                        │
│                     └──────┬───────┘                        │
│                            │                                │
│                     ┌──────▼───────┐                        │
│                     │  /r/ public  │                        │
│                     │  registry    │                        │
│                     │  endpoint    │                        │
│                     └──────────────┘                        │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
                   ┌──────────────────┐
                   │  Consumer App    │
                   │  npx shadcn add  │
                   │  --from registry │
                   └──────────────────┘
```

### Registry Output

The builder generates shadcn-compatible registry JSON served via per-project public URLs:

```
https://handle.usefoundryui.app/r/project-slug/block-name.json
```

Consumer apps install blocks using the standard shadcn CLI:

```bash
npx shadcn add https://handle.usefoundryui.app/r/my-project/hero-section.json
```

### Database Tables

| Table | Purpose |
|-------|---------|
| `native_component` | Component palette definitions (public, no userId) |
| `block` | User-saved block trees with generated code |
| `block_category` | User-created folders for organising blocks |
| `block_collection` | Multi-block compositions (layouts, page sets) |
| `builder_config` | Module-level config (shared fields, project node type) |

### Philosophy

"Design down to dev, not dev up to design" — users see what they're building before code is generated.

---

## Prerequisites

- **Structure module** — must be installed first (`npx structure init`)
- **Node.js 18+** and a running starter template app
- **Neon database** (or compatible PostgreSQL) with Prisma configured

---

## Related Modules

- **[Structure](/modules/structure/)** (required) — Provides the project system for scoping blocks and registry URLs
- **Builder Logic** (future) — Events, bindings, and data source integrations
- **Builder Style** (future) — Tailwind class picker and theme generator
