---
title: CLI Reference
description: Complete command reference for module CLI commands — init, update, uninstall, enable, disable, info, and more
sidebar:
  order: 35
---

import { Aside, Tabs, TabItem } from '@astrojs/starlight/components';

Every module built with the module starter provides a CLI tool (via the `bin` field in `package.json`). After building and publishing, users run these commands in a starter template project.

<Aside type="tip">
All commands are run from the root of a starter template project (the app where you want to install the module).
</Aside>

---

## init

Install the module into the current project.

```bash
npx my-module init
npx my-module init --force
npx my-module init --no-interactive
```

### Flags

| Flag | Description |
|------|-------------|
| `--force` | Overwrite existing files without prompting |
| `--no-interactive` | Skip all prompts, use defaults |

### What It Does

1. **Checks required modules** — Verifies `requiredModules` are installed (checks for feature directories)
2. **Runs interactive setup** — Asks module-specific prompts, detects frontend/backend paths, offers auto-registration and dependency installation choices
3. **Copies database schema** — Detects Prisma structure (multi-file or single-file), processes template placeholders, appends or creates schema file
4. **Generates frontend files** — Creates directory structure, processes templates with placeholder replacement, adds version headers, writes files
5. **Generates backend files** — Same process for backend templates
6. **Auto-registers** — Wires the module into `routes.tsx` (frontend) and `app.ts` (backend) by inserting import statements and route spreads
7. **Collects environment variables** — Prompts for env var values (supporting `secret` masking and `when` conditionals), writes to `.env` files
8. **Installs UI components** — Runs `npx shadcn@latest add` for each required shadcn component
9. **Installs dependencies** — Runs `npm install` in frontend and/or backend directories
10. **Saves manifest and runs hooks** — Saves `.module-manifests.json` tracking all installed files and registrations, saves `.module-state.json` with prompt answers, then runs `onInstall` and `onActivate` lifecycle hooks

### Output

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
                  AI Chat - Module Installation
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[1/10] ✓ Required modules check passed
[2/10] ✓ Interactive setup complete
...
[10/10] ✓ Manifest saved

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
                  ✨ AI Chat - Installation Complete
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Next steps:
  1. Run database migration: cd backend && npx prisma migrate dev
  2. Start the app: npm run dev
```

### Common Errors

| Error | Cause | Fix |
|-------|-------|-----|
| `Module is already installed` | Feature directory exists | Use `--force` to overwrite |
| `Required module X is not installed` | Missing dependency | Install the required module first |
| `Could not detect frontend path` | Not in a starter template project | Run from the project root |

---

## update

Update installed module files to the latest templates.

```bash
npx my-module update
npx my-module update --dry-run
npx my-module update --force
npx my-module update --skip-schema
```

### Flags

| Flag | Description |
|------|-------------|
| `--dry-run` | Preview changes without applying them |
| `--force` | Apply all updates without confirmation, including to user-modified files |
| `--skip-schema` | Skip Prisma schema change detection and update |

### What It Does

1. **Finds installed module** — Reads the manifest to locate all generated files
2. **Compares each template file** — Parses version headers (extracts old version and hash), loads current template, processes placeholders, calculates new hash, compares
3. **Decision tree per file:**
   - Template unchanged, file unchanged → **Skip**
   - Template changed, file not user-modified → **Update** (safe overwrite)
   - Template unchanged, file user-modified → **Skip** (preserves user changes)
   - Both changed → **Conflict** (flags for manual review)
4. **Detects schema changes** — Compares current Prisma schema template against installed schema. If changed, prompts to update (uses stored `moduleAnswers` for variable substitution)
5. **Runs Prisma commands** — If schema was updated, automatically runs `prisma generate` and `prisma migrate dev` in the backend directory so the database stays in sync (since scaffold v1.4.21)
6. **Runs `onUpdate` hook** — If version changed, passes rich context including `fromVersion`, `toVersion`, `schemaChanged`, `moduleAnswers`, and detailed `changes` object

### Dry Run Output

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
                  AI Chat - Update (Dry Run)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Files that would be updated:
  ✓ frontend/src/features/ai-chat/pages/AiChatPage.tsx
  ✓ backend/src/features/ai-chat/ai-chat.service.ts

Files skipped (user-modified):
  ⚠ frontend/src/features/ai-chat/components/ChatWidget.tsx

No changes needed: 4 files
```

---

## uninstall

Remove the module from the project.

```bash
npx my-module uninstall
npx my-module uninstall --force
npx my-module uninstall --keep-data
npx my-module uninstall --export ./backup
```

### Flags

| Flag | Description |
|------|-------------|
| `--force` | Skip confirmation prompts |
| `--keep-data` | Keep database tables (don't remove Prisma models from schema) |
| `--export <path>` | Export module data before removing (path to export directory) |

### What It Does

1. **Runs `onUninstall` hook** — Allows the module to offer data export or clean up external resources
2. **Removes generated files** — Deletes all files and directories listed in the manifest
3. **Removes auto-registrations** — Cleans up import statements and route spreads from `routes.tsx` and `app.ts`
4. **Removes schema models** — Removes Prisma models from the schema file (unless `--keep-data`)
5. **Cleans up manifest** — Removes the module's entry from `.module-manifests.json`

<Aside type="caution">
After uninstalling, you need to manually:
- Remove npm dependencies that may be shared with other modules
- Remove environment variables from `.env` files
- Run `npx prisma generate` and `npx prisma migrate dev` to sync the database
</Aside>

---

## info

Display information about the module.

```bash
npx my-module info
```

### Output

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
                  AI Chat - Module Information
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Name:        AI Chat
ID:          ai-chat
Version:     1.2.0
Description: AI-powered chat interface

Features:
  • Real-time chat with AI models
  • Conversation history
  • Multiple AI providers

Status:      Installed (Enabled)
Installed:   2025-01-15T10:30:00Z
```

---

## enable

Re-enable a previously disabled module.

```bash
npx my-module enable
npx my-module enable --force
```

### Flags

| Flag | Description |
|------|-------------|
| `--force` | Skip confirmation prompt |

### What It Does

1. **Checks module status** — Verifies the module is installed and currently disabled
2. **Runs `onActivate` hook** — Executes activation logic (start jobs, register webhooks, etc.)
3. **Updates module state** — Sets `enabled: true` in `.module-state.json`

<Aside type="note">
Enabling a module does not modify any generated files. It sets a state flag and runs the `onActivate` hook. What "enabled" means for your module is defined by your lifecycle hooks.
</Aside>

---

## disable

Disable a module without removing its files.

```bash
npx my-module disable
npx my-module disable --force
```

### Flags

| Flag | Description |
|------|-------------|
| `--force` | Skip confirmation prompt |

### What It Does

1. **Checks module status** — Verifies the module is installed and currently enabled
2. **Runs `onDeactivate` hook** — Executes deactivation logic (pause jobs, unregister webhooks, etc.)
3. **Updates module state** — Sets `enabled: false` in `.module-state.json`

Files remain in place. The module can be re-enabled with `npx my-module enable` or fully removed with `npx my-module uninstall`.

---

## migrate

Add version headers to files that were installed before the version header system.

```bash
npx my-module migrate
npx my-module migrate --dry-run
```

### Flags

| Flag | Description |
|------|-------------|
| `--dry-run` | Preview which files would get headers without applying |

### What It Does

Scans installed module files for missing `// @generated-by:` version headers. For each file without a header, it matches the file against current templates and adds the appropriate version header.

This is a one-time migration command. Files installed with scaffold v1.4.0+ already have version headers.

---

## update-schema (Deprecated)

```bash
npx my-module update-schema
```

<Aside type="caution">
This command is **deprecated**. Schema updates are now integrated into the `update` command. Running `update-schema` will display a message directing you to use `npx my-module update` instead.
</Aside>

---

## State Files

The scaffold creates these files in the target project root:

| File | Purpose |
|------|---------|
| `.module-manifests.json` | Tracks all installed files, registrations, and schema models per module |
| `.module-state.json` | Tracks module version, enabled/disabled status, and prompt answers |

Both files should be committed to version control so the module state is shared across the team.

---

## Next Steps

- [Scaffold Architecture](/module-starter/scaffold/) — How the scaffold infrastructure works internally
- [Versioning & Updates](/module-starter/versioning/) — Version headers and the update mechanism
- [Lifecycle Hooks](/module-starter/lifecycle-hooks/) — What happens during install, update, enable, disable, uninstall
- [Building Your Module](/module-starter/building-modules/) — Template authoring and testing
