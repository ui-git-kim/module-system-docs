---
title: Lifecycle Hooks
description: Filter and action registries for advanced module integration
---

## Overview

Modules can hook into lifecycle events using **filters** (transform data) and **actions** (execute side effects).

---

## Filter Registry

Filters transform data at defined hook points:

```typescript
import { filterRegistry } from '@/config/filter.registry';

// Register filter
filterRegistry.register(
  'user.displayName',     // Hook name
  'my-module-titles',     // Unique ID
  (value, context) => {
    if (context.user?.title) {
      return `${context.user.title} ${value}`;
    }
    return value;
  },
  10                      // Order
);

// Apply filter
const displayName = filterRegistry.apply('user.displayName', user.name, { user });
```

---

## Action Registry

Actions execute side effects at hook points:

```typescript
import { actionRegistry } from '@/config/action.registry';

// Sync action
actionRegistry.addAction(
  'user.loggedIn',
  'my-module-analytics',
  (context) => {
    trackEvent('login', { userId: context.user.id });
  },
  10
);

// Async action
actionRegistry.addActionAsync(
  'settings.saved',
  'my-module-sync',
  async (context) => {
    await syncToExternal(context.settings);
  },
  20
);

// Execute actions
actionRegistry.doAction('user.loggedIn', { user });
await actionRegistry.doActionAsync('settings.saved', { settings });
```

---

## Common Hooks

| Hook | Type | When |
|------|------|------|
| `user.displayName` | Filter | Format display name |
| `user.loggedIn` | Action | After login |
| `user.loggedOut` | Action | After logout |
| `settings.saved` | Action | Settings updated |
| `app.shutdown` | Action | Server shutdown |

---

## Creating Custom Hooks

In your module, trigger hooks for others to use:

```typescript
// Apply filter in your code
const formatted = filterRegistry.apply('myModule.format', data, { options });

// Trigger action
await actionRegistry.doActionAsync('myModule.processed', { result, duration });
```

---

## Best Practices

- Use unique, namespaced IDs
- Handle errors gracefully
- Don't throw in hooks
- Clean up on shutdown
- Document your hooks

---

## Next Steps

- [Templates](/module-starter/templates/) - Code templates
- [Module Structure](/module-starter/module-structure/) - File organisation
