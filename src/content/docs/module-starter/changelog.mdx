---
title: Changelog
description: Version history and release notes for the module starter
---

import { Aside, Badge } from '@astrojs/starlight/components';

This page documents notable changes to the module starter template. The module starter uses semantic versioning: **major.minor.patch**.

- **Major** (1.0.0 → 2.0.0): Breaking changes requiring migration
- **Minor** (1.0.0 → 1.1.0): New features, backwards compatible
- **Patch** (1.0.0 → 1.0.1): Bug fixes, documentation updates

<Aside type="tip">
The module starter has **two version numbers**:
- **Scaffold version** (`VERSION` file) — Infrastructure version (currently 1.5.0)
- **Module version** (`package.json`) — Your module's version
</Aside>

---

## Scaffold v1.5.0

**Update command: automatic dependency and component installation**

The `update` command now detects and installs new npm dependencies, shadcn components, UI libraries, and environment variables that were added between module versions.

**Delta detection via module state:**
- `ModuleState` interface extended with asset tracking fields: `installedFrontendDeps`, `installedBackendDeps`, `installedProviderDeps`, `installedShadcnComponents`, `installedUILibraries`, `installedEnvVars`
- `init` command now saves installed assets to `.module-state.json`
- `update` command compares current module definition against stored state to find what's new
- Only new assets are installed — existing dependencies are not re-installed

**Update command now has 8 steps** (was 6):
1. Detect project structure
2. Scan installed files
3. Analyse template changes
4. Schema update
5. **New:** Install new dependencies and UI components
6. **New:** Add new environment variables
7. Run lifecycle hooks
8. Apply template updates

**Legacy install handling:**
- Modules installed before v1.5.0 have no asset tracking fields in their state
- First update after upgrading to v1.5.0 catalogues existing assets without trying to reinstall them
- Subsequent updates use delta detection normally

**Shared functions:**
- `installShadcnComponents()`, `installDependencies()`, `collectEnvVariables()`, and `writeEnvVariables()` are now exported from `init.ts` for reuse by `update.ts`

---

## Scaffold v1.4.23

**Comprehensive audit: type fixes, new registry templates, console.log cleanup, hook table alignment**

Full codebase audit against system documentation. Fixed all stale type definitions, added missing registry templates, removed all `console.log` from templates, and aligned hook point tables with actual starter template hooks.

**Type definition fixes (`src/scaffold/types.ts`):**
- All order default JSDoc comments updated from 10/100 to unified 50
- `HeaderToolbarItemConfig.type` union expanded: added `'button' | 'search'`
- Added `variant`, `disabled`, `loading` fields (button type) and `placeholder`, `onSearch` fields (search type)
- `RegistryType` union expanded: added `'notificationPreferences' | 'languageOptions'`

**New registry templates:**
- `NOTIFICATION_PREFERENCES_REGISTRATION` — notification toggle preferences
- `LANGUAGE_OPTIONS_REGISTRATION` — language selector options
- Both exported from `src/templates/frontend/index.ts`

**Module.ts completeness:**
- Added commented-out registration entries for all registries: headerToolbar, adminPage, notificationPreferences, languageOptions, filter, action
- Added commented-out `DETAIL_PAGE_TEMPLATE` entry in frontend templates
- Barrel INDEX_TEMPLATE updated with notification/language registration imports

**Console.log cleanup:**
- All `console.log` removed from templates (frontend and backend)
- Placeholder handlers replaced with descriptive comments and API call patterns
- Integration component: removed console.log from connect handler

**Hook table alignment:**
- Backend action registration: updated hook table to match documented hooks (`user.created` context now `{ userId, email, role, isFirstUser }`, added `admin.*` hooks, removed undocumented `auth.*` hooks)
- Frontend action registration: simplified to confirmed hooks (`theme.changed`, `settings.saved`, `route.changed`) plus custom hook guidance

---

## Scaffold v1.4.22

**Detail page template and breadcrumb guidance**

Added `DETAIL_PAGE_TEMPLATE` with proper `useBreadcrumbs()` hook usage for dynamic breadcrumbs. Added breadcrumb guidance notes to all page templates (settings, billing, admin) clarifying which pages get automatic breadcrumbs and which need the hook.

**Changes:**
- New `DETAIL_PAGE_TEMPLATE` in `src/templates/frontend/pages.ts` with `useBreadcrumbs()` example
- Settings/billing/admin page templates now include notes: "Breadcrumbs are set AUTOMATICALLY by the framework"
- Routes config template enhanced with `handle.crumb` documentation

---

## Scaffold v1.4.21

**Fix schema detection false positive on Windows and auto-run Prisma commands**

Fixed a regression where the update command falsely detected schema changes due to CRLF vs LF line ending mismatch on Windows. Added automatic `prisma generate` and `prisma migrate dev` after schema updates (matching init behaviour).

**Changes:**
- Added `normLF()` normalisation before multi-file schema comparison
- New `runPrismaAfterSchemaUpdate()` helper auto-runs prisma commands after schema update
- Schema update success message changed from "run manually" to "Schema updated and database migrated"

---

## Scaffold v1.4.20

**Template alignment with starter template v1.20.1**

Comprehensive update of all templates to align with the latest starter template conventions.

**Changes:**
- Backend service template: added `createModuleLogger` and `actionRegistry.doAction()` after CRUD operations
- Backend routes template: added structured logging
- All order defaults unified to 50 across frontend and backend registration templates
- Header toolbar template: added all 6 types (`action`, `toggle`, `dropdown`, `button`, `search`, `custom`)
- Settings/billing page templates: updated imports from `SettingsComponents` to `@/components/settings-blocks`
- Action registration template: added `theme.changed` hook example with `{ variables }` context
- Filter/action registration templates: fixed order defaults to 50

---

## Scaffold v1.4.19

**Robust schema removal using template-extracted model names**

Fixed schema uninstall and update logic to extract model names directly from template content rather than relying solely on `modelNames` in module configuration. This prevents orphaned models when the configuration is out of sync with actual template content.

**Changes:**
- `extractModelNamesFromTemplate()` utility parses `model <name> {` patterns from schema template strings
- Schema removal now uses the union of configured `modelNames` and extracted names
- Prevents orphaned tables after uninstall when `modelNames` array is incomplete

---

## Scaffold v1.4.18

**Fix duplicate model occurrences during schema update**

Fixed an issue where `update --force` or schema re-application could leave duplicate model definitions in the Prisma schema file, causing migration errors.

**Changes:**
- Schema update now removes ALL existing occurrences of module models before re-inserting
- Handles both single-file and multi-file Prisma setups
- Prevents `Error validating: duplicate model name` errors

---

## Scaffold v1.4.17

**Schema detection false positives and duplicate table prevention**

Fixed schema detection logic that was producing false positives when checking whether a module's schema was already installed, and prevented duplicate table entries during re-installation.

**Changes:**
- Schema detection now uses stricter matching to avoid false positives from partial model name matches
- Duplicate table entries are prevented when running `init --force` on a project with existing schema

---

## Scaffold v1.4.16

**Docs submodule conflict fix for scaffold updates**

Fixed an issue where the `docs` submodule could cause conflicts during `scaffold:update`, blocking the merge from completing.

**Changes:**
- `update-scaffold` scripts now auto-resolve `docs` submodule conflicts during merge
- Prevents stale submodule references from blocking scaffold updates

---

## Scaffold v1.4.15

**Space-separated placeholder replacement for human-readable strings**

Templates extensively use `My Feature` (Title Case) and `my feature` (lowercase) for UI strings — page titles, labels, descriptions, breadcrumbs, and comments. Previously, only code-oriented placeholders (`my-feature`, `myFeature`, `MyFeature`, `my_feature`) were replaced by `processTemplate()`, leaving literal "My Feature" text in generated output.

**Changes:**
- Added `titleCase()` helper — converts `ai-chat` → `Ai Chat`
- Added `lowerSpaceCase()` helper — converts `ai-chat` → `ai chat`
- `processTemplate()` now replaces `My Feature` → Title Case and `my feature` → lowercase space-separated
- All six placeholder patterns are now documented in CLAUDE.md and the docs site

**Full placeholder table (all six patterns):**

| Pattern | Case | Example (`ai-chat`) |
|---------|------|---------------------|
| `My Feature` | Title Case | `Ai Chat` |
| `my feature` | lowercase | `ai chat` |
| `my-feature` | kebab-case | `ai-chat` |
| `myFeature` | camelCase | `aiChat` |
| `MyFeature` | PascalCase | `AiChat` |
| `my_feature` | snake_case | `ai_chat` |

**Propagation:** Run `npm run scaffold:update` in cloned modules, then rebuild with `npm run build`.

---

## Scaffold v1.4.14

**Fix VS Code remote push target**

Fixed an issue where VS Code's "Publish Branch" feature would push to `scaffold-upstream` instead of the module's own `origin` remote after cloning.

**Changes:**
- Create scripts now remove upstream tracking from local branches after renaming the remote
- VS Code correctly offers to push to `origin` when publishing

---

## Scaffold v1.4.13

**Docs submodule restoration after repair**

Fixed an issue where the `docs` submodule was not properly restored after a repair operation during scaffold updates, leaving the submodule in a broken state.

---

## Scaffold v1.4.12

**Docs submodule corruption fix and self-update push fix**

Fixed two issues:
1. A broken `docs` submodule reference could corrupt all git operations in the module
2. The self-update step in `update-scaffold` could fail to push changes

**Changes:**
- Added docs submodule health check and repair during scaffold update
- Fixed self-update push target to use correct remote

---

## Scaffold v1.4.11

**Fix silent initial commit failure in create-module scripts**

Fixed an issue where the initial git commit in newly created modules could fail silently, leaving the module in an uncommitted state.

---

## Scaffold v1.4.10

**Fix UTF-8 character corruption in CLAUDE.md and docs submodule**

Fixed character encoding issues during module cloning and scaffold updates that corrupted special characters (emojis, arrows, accented characters) in CLAUDE.md files.

**Changes:**
- Enforced UTF-8 encoding throughout CLAUDE.md processing pipeline
- Fixed docs submodule connection setup during scaffold update

---

## Scaffold v1.4.8

**CLAUDE.md smart merge improvements**

Multiple fixes to the CLAUDE.md smart merge system used during scaffold updates:

- v1.4.3–1.4.8: Progressive fixes to the merge strategy including explicit upstream fetch, UTF-8 encoding for git output, Node.js-based merge for encoding preservation, accept-current strategy with CLAUDE.MODULE.md smart merge, and revert to stable v1.4.3 base after regressions

---

## Scaffold v1.4.2 — v1.4.1

**Docs submodule auto-initialisation and gitmodules auto-resolve**

- v1.4.2: Added `.gitmodules` to auto-resolve list during scaffold updates and strengthened commit/push instructions
- v1.4.1: Auto-initialise docs submodule during scaffold update if missing

---

## Scaffold v1.4.0

**Unified update command with schema integration, rich lifecycle context, and state preservation**

Schema updates are now part of the main `update` command instead of a separate `update-schema` command. The update flow detects Prisma schema changes, prompts for confirmation, and applies them alongside template updates. The `update-schema` command is deprecated.

**Schema integration:**
- `update` command now detects schema template changes (both multi-file and single-file Prisma setups)
- Interactive confirmation before applying schema updates
- Uses stored `moduleAnswers` for variable substitution in schema templates
- `--skip-schema` flag to skip schema updates
- Proper generator/datasource block stripping using brace-depth counting (replaces fragile line filter)

**Rich UpdateContext for lifecycle hooks:**
- `schemaChanged` — whether the schema template changed
- `moduleAnswers` — stored prompt answers from initial installation
- `changes` — detailed object with `updatedFiles`, `addedFiles`, `removedFiles`, and `schemaUpdated`
- `versionChange` — object with `major`, `minor`, `patch` booleans

**State preservation:**
- `moduleAnswers` from prompts are now saved to `.module-state.json` during `init`
- All state-saving operations (`update`, `enable`, `disable`) preserve `moduleAnswers`
- Answers are loaded and used for variable substitution during schema updates

**Bug fixes:**
- Fixed `removeSchemaBlock` false positives — now uses start-of-line regex instead of `indexOf`
- Fixed generator/datasource stripping — new `stripGeneratorDatasourceBlocks()` with brace-depth counting
- Extracted shared `findModuleSchema()` utility to eliminate code duplication

---

## Scaffold v1.3.10

**Conditional blocks in template processing**

Added Handlebars-style `{{#if}}` / `{{else}}` / `{{/if}}` conditionals to `processTemplate()`. Zero new dependencies — lightweight custom implementation.

**Supported syntax:**
- `{{#if variableName}}...{{/if}}` — truthy check
- `{{#if variableName}}...{{else}}...{{/if}}` — if/else
- `{{#if provider === 'stripe'}}...{{/if}}` — equality check
- `{{#if provider !== 'stripe'}}...{{/if}}` — inequality check
- Nesting supported

Conditionals are evaluated before variable substitution, so `{{variable}}` placeholders inside conditional blocks work correctly.

---

## Module v1.1.2

**Template alignment and documentation overhaul**

Comprehensive review and alignment of module starter templates with the starter template's refactored registry system, plus new scaffold architecture documentation.

**Code Fixes:**
- Fixed integration categories to match starter template (`'developer'` and `'social'` instead of `'ai'`)
- Updated integration icon type comment to note `ComponentType<{ className?: string }> | LucideIcon` support
- Fixed backend index `generateBackendIndex()` fallback to include side-effect registration imports (matching starter template pattern)

**Documentation:**
- New **Scaffold Architecture** page covering: installation pipeline, template processing, version headers, update mechanism, manifest system, auto-registration, enable/disable, lifecycle hooks, and registry alignment guide
- Fixed **Creating Modules** configuration example to match actual `ModuleDefinition` interface (correct `templates` object format, `indexFiles`, `envVariables` split, `registrations` array, etc.)
- Updated **Lifecycle Hooks** page with module lifecycle hooks section (onInstall, onUpdate, onActivate, onDeactivate, onUninstall)
- Updated **Module Structure** to list all scaffold files (enable.ts, disable.ts, lifecycle-utils.ts, update-schema.ts)
- Updated **CLI Commands** to include `update-schema`, `migrate`, `disable`, `enable`
- Updated **Roadmap** to reflect completed features and correct `requiredModules` status
- Added cross-references between all pages for better navigation

---

## Module v1.1.1

**Align templates with starter template registry conventions**

Updated all template order comments and default values to use the unified 0-100 scale documented in the starter template.

**Changes:**
- All order values default to `50` (was inconsistent: 20, 30, etc.)
- All order comments now reference the 0-100 scale: `0-25: primary, 26-50: core, 51-75: secondary, 76-100: utilities`
- Navigation template adds `sidebarSection` option for grouping items
- User menu order corrected from `30` to `50`
- Index/barrel template now lists all available registration imports (personal-info, header-toolbar, admin-pages)
- Registration imports reorganised into "Collection registrations" and "Pipeline hooks" groups

---

## Scaffold v1.3.8

**Cache fix and documentation alignment**

- Added `dangerous-clean-slate: true` to FTP deploy action for fresh deploys
- Added `.htaccess` to disable LiteSpeed cache on hosting
- Bumped scaffold version

---

## Scaffold v1.3.7

**CLAUDE.md Documentation Split**

Separated documentation files for different contexts:

- `CLAUDE.md` - Instructions for working on the module starter infrastructure itself
- `CLAUDE.MODULE.md` - Gets renamed to `CLAUDE.md` when cloning for a new module

**Changes:**
- Create scripts now remove scaffold version of `CLAUDE.md` and rename `CLAUDE.MODULE.md`
- Module-specific instructions include module overview section for customisation
- Clear separation between scaffold development and module development

---

## Scaffold v1.3.6

**Documentation Improvements**

- Comprehensive rewrite of module starter documentation
- Fixed incorrect Prisma schema examples (removed `@relation` directives)
- Added template placeholder documentation
- Added CLI commands reference
- Added two-version system explanation

---

## Scaffold v1.3.0

**Admin Pages Registry Support**

Added support for registering admin panel pages from modules:

```typescript
adminPagesRegistry.register({
  id: 'my-feature',
  title: 'My Feature Settings',
  icon: Settings,
  component: MyFeatureAdminPage,
  order: 50,
});
```

**Changes:**
- New `ADMIN_PAGES_REGISTRATION` template
- Admin page component template
- Updated index template to include admin registration import

---

## Scaffold v1.2.0

**Filter and Action Registries**

Added templates for filter and action hook registrations:

**Filters:**
- Transform data at hook points
- Chain multiple filters together
- Frontend and backend support

**Actions:**
- Execute side effects at hook points
- Sync and async variants
- Frontend and backend support

**New Templates:**
- `FILTER_REGISTRATION` (frontend)
- `ACTION_REGISTRATION` (frontend)
- Backend filter and action registration templates

---

## Scaffold v1.1.0

**Settings Pages Registry**

Added support for registering settings pages:

```typescript
settingsPagesRegistry.register({
  id: 'my-feature',
  title: 'My Feature',
  icon: Settings,
  component: MyFeatureSettings,
  order: 70,
});
```

**Changes:**
- New `SETTINGS_PAGE_REGISTRATION` template
- Settings page component template using `SettingsComponents`
- Updated registrations configuration options

---

## Scaffold v1.0.0

**Initial Release**

Core module scaffolding system:

- CLI commands: `init`, `update`, `uninstall`, `info`
- Template placeholder system (`my-feature` → actual name)
- Variable substitution (`{{variableName}}`)
- Frontend and backend template support
- Prisma schema integration
- Navigation, dashboard, and preferences registrations
- Route and service registrations (backend)
- Interactive prompts for module configuration
- Environment variable prompts
- Dependency management (shadcn components, npm packages)
- Version header system for update tracking
- Scaffold update system via git remotes



<Aside type="note">
For version bump commands and policies, see [Versioning & Updates](/module-starter/versioning/).
</Aside>
