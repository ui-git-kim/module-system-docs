---
title: Code Templates
description: Copy-paste templates for module development
---

import { Aside, Tabs, TabItem } from '@astrojs/starlight/components';

These templates are ready to copy into your module's `src/templates/` directory. Remember to use placeholder patterns — `My Feature` for titles/labels, `my-feature` for kebab-case, `MyFeature` for PascalCase, `myFeature` for camelCase, `my_feature` for snake_case, and `my feature` for lowercase prose. All patterns get replaced with the actual module name during installation. See [Template Placeholders](/module-starter/building-modules/#template-placeholders) for the full reference.

<Aside type="tip">
All templates should include the standard file header with `FILE:` and `PURPOSE:` comments.
</Aside>

---

## Frontend Templates

### Index (Barrel File)

```typescript
// src/templates/frontend/routes.ts
export const INDEX_TEMPLATE = `// ========================================================================
// FILE: frontend/src/features/my-feature/index.ts
// PURPOSE: Public exports and registry integrations for my-feature
// ========================================================================

// ========================================================================
// REGISTRATION IMPORTS (side effects)
// These MUST come first - they register the module with app registries
// ========================================================================

import './navigation.registration';
// import './registrations/dashboard.registration';
// import './registrations/preferences.registration';
// import './filter.registration';
// import './action.registration';

// ========================================================================
// PUBLIC EXPORTS
// ========================================================================

export { myFeatureRoutes } from './routes.config';
export { MyFeaturePage } from './pages/MyFeaturePage';
`;
```

### Navigation Registration

The navigation registry supports three areas: main sidebar, secondary sidebar (bottom), and user menu. You can also group items into sidebar sections.

```typescript
// src/templates/frontend/registrations.ts
export const NAVIGATION_REGISTRATION = `// ========================================================================
// FILE: frontend/src/features/my-feature/navigation.registration.ts
// PURPOSE: Register navigation items for my-feature
// ========================================================================

import { navigationRegistry } from '@/config/navigation.registry';
import { Sparkles } from 'lucide-react';

// Main sidebar item
navigationRegistry.registerMain({
  id: 'my-feature',
  title: 'My Feature',
  url: '/my-feature',
  icon: Sparkles,
  order: 30,
  // sidebarSection: 'my-section',  // Optional: assign to a section
  // badge: '3',                     // Optional: badge text/count
  // items: [{ title: 'Sub', url: '/...' }],  // Optional: collapsible sub-items
});

// Secondary sidebar (optional - bottom section)
// navigationRegistry.registerSecondary({
//   id: 'my-feature-secondary',
//   title: 'My Feature',
//   url: '/my-feature',
//   icon: Sparkles,
//   order: 50,
// });

// User menu (optional - user dropdown)
// navigationRegistry.registerUserMenu({
//   id: 'my-feature-menu',
//   title: 'My Feature',
//   url: '/my-feature',
//   icon: Sparkles,
//   order: 30,
// });
`;
```

<Aside type="tip">
Modules can register **sidebar sections** to group navigation items. Use `navigationRegistry.registerSection()` to create a labelled group. See the [Navigation Registry reference](/starter-template/registries/#navigation-registry) for details.
</Aside>

### Routes Configuration

```typescript
export const ROUTES_CONFIG = `// ========================================================================
// FILE: frontend/src/features/my-feature/routes.config.tsx
// PURPOSE: Route definitions for my-feature
// ========================================================================

import { lazy } from 'react';
import type { RouteObject } from 'react-router-dom';

const MyFeaturePage = lazy(() =>
  import('./pages/MyFeaturePage').then((m) => ({ default: m.MyFeaturePage }))
);

export const myFeatureRoutes: RouteObject[] = [
  {
    path: 'my-feature',
    element: <MyFeaturePage />,
  },
];
`;
```

### Page Component

```typescript
// src/templates/frontend/pages.ts
export const PAGE_TEMPLATE = `// ========================================================================
// FILE: frontend/src/features/my-feature/pages/MyFeaturePage.tsx
// PURPOSE: Main page for my-feature
// ========================================================================

import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';

export function MyFeaturePage() {
  return (
    <div>
      {/* Page Header */}
      <div className="mb-6">
        <h1 className="text-xl font-semibold tracking-tight">My Feature</h1>
        <p className="mt-1 text-sm text-muted-foreground">
          Description of what this feature does.
        </p>
      </div>

      {/* Page Content */}
      <Card>
        <CardHeader>
          <CardTitle>Getting Started</CardTitle>
          <CardDescription>
            Welcome to My Feature.
          </CardDescription>
        </CardHeader>
        <CardContent>
          <p className="text-sm text-muted-foreground">
            This is a placeholder. Replace with your feature's UI.
          </p>
          <Button className="mt-4">Get Started</Button>
        </CardContent>
      </Card>
    </div>
  );
}
`;
```

### Dashboard Widget

<Tabs>
  <TabItem label="Component">
```typescript
// src/templates/frontend/components.ts
export const WIDGET_COMPONENT_TEMPLATE = `// ========================================================================
// FILE: frontend/src/features/my-feature/components/widgets/MyFeatureWidget.tsx
// PURPOSE: Dashboard widget for my-feature
// ========================================================================

import type { DashboardWidgetProps } from '@/config/dashboard.registry';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';

export function MyFeatureWidget({ widget }: DashboardWidgetProps) {
  return (
    <Card className="h-full">
      <CardHeader className="pb-2">
        <CardTitle className="text-sm font-medium">{widget.title}</CardTitle>
      </CardHeader>
      <CardContent>
        <div className="text-2xl font-bold">--</div>
        <p className="text-xs text-muted-foreground">Widget content</p>
      </CardContent>
    </Card>
  );
}
`;
```
  </TabItem>
  <TabItem label="Registration">
```typescript
export const DASHBOARD_REGISTRATION = `// ========================================================================
// FILE: frontend/src/features/my-feature/registrations/dashboard.registration.ts
// PURPOSE: Dashboard widget registration for my-feature
// ========================================================================

import { dashboardRegistry } from '@/config/dashboard.registry';
import { MyFeatureWidget } from '../components/widgets/MyFeatureWidget';

dashboardRegistry.register({
  id: 'my-feature-overview',
  title: 'My Feature',
  component: MyFeatureWidget,
  size: '2x1',              // '1x1' | '2x1' | '1x2' | '2x2' | 'full'
  order: 20,
  category: 'activity',     // Optional grouping
  description: 'Overview of my feature activity',
  canHide: true,            // User can hide this widget (default: true)
  canResize: false,         // User can resize this widget (default: false)
});
`;
```

**Widget Sizes:** `1x1` (small stats), `2x1` (charts), `1x2` (lists), `2x2` (complex), `full` (full-width)
  </TabItem>
</Tabs>

### Settings Page

The settings page registry supports two patterns: **new pages** (add a new section to settings) and **replacement pages** (replace a placeholder like Billing with a real implementation).

<Tabs>
  <TabItem label="Component">
```typescript
export const SETTINGS_PAGE_COMPONENT_TEMPLATE = `// ========================================================================
// FILE: frontend/src/features/my-feature/components/settings/MyFeatureSettings.tsx
// PURPOSE: Settings page content for my-feature
// ========================================================================

import {
  SettingsToggleRow,
  SettingsSectionHeader,
} from '@/features/user/components/settings/SettingsComponents';
import { useState } from 'react';

export function MyFeatureSettings() {
  const [enabled, setEnabled] = useState(true);

  return (
    <div className="space-y-6">
      <SettingsSectionHeader
        title="My Feature Settings"
        description="Configure my-feature options"
      />

      <SettingsToggleRow
        label="Enable Feature"
        description="Turn this feature on or off"
        checked={enabled}
        onCheckedChange={setEnabled}
      />
    </div>
  );
}
`;
```
  </TabItem>
  <TabItem label="New Page">
```typescript
// Add a completely new page to the settings section
export const SETTINGS_PAGE_NEW_REGISTRATION = `// ========================================================================
// FILE: frontend/src/features/my-feature/registrations/settings-page.registration.ts
// PURPOSE: Register a new settings page for my-feature
// ========================================================================

import { settingsPagesRegistry } from '@/config/settings-pages.registry';
import { Sparkles } from 'lucide-react';
import { MyFeatureSettingsPage } from '../pages/MyFeatureSettingsPage';

settingsPagesRegistry.register({
  id: 'my-feature',
  title: 'My Feature',
  description: 'Configure My Feature settings',
  icon: Sparkles,
  component: MyFeatureSettingsPage,
  order: 60,
});
`;
```
  </TabItem>
  <TabItem label="Replacement">
```typescript
// Replace a placeholder page (e.g., Billing) with a real implementation
export const SETTINGS_PAGE_REGISTRATION = `// ========================================================================
// FILE: frontend/src/features/my-feature/registrations/settings-page.registration.ts
// PURPOSE: Replace placeholder settings page with real implementation
// ========================================================================

import { settingsPagesRegistry } from '@/config/settings-pages.registry';
import { CreditCard } from 'lucide-react';
import { MyBillingPage } from '../pages/MyBillingPage';

settingsPagesRegistry.register({
  id: 'billing',            // Must match existing placeholder ID
  title: 'Billing',
  description: 'Manage subscription and payments',
  icon: CreditCard,
  component: MyBillingPage,
  order: 50,
  isReplacement: true,      // IMPORTANT: This replaces the placeholder
});

// Replaceable pages: 'billing'
// Non-extensible pages (cannot replace): 'security', 'data'
`;
```
  </TabItem>
</Tabs>

### Header Toolbar

Add buttons, toggles, dropdowns, or custom components to the header toolbar.

```typescript
export const HEADER_TOOLBAR_REGISTRATION = `// ========================================================================
// FILE: frontend/src/features/my-feature/header-toolbar.registration.ts
// PURPOSE: Register header toolbar items for my-feature
// ========================================================================

import { headerToolbarRegistry } from '@/config/header-toolbar.registry';
import { Sparkles } from 'lucide-react';

// Action button (simple click handler)
headerToolbarRegistry.register({
  id: 'my-feature-action',
  type: 'action',           // 'action' | 'toggle' | 'dropdown' | 'custom'
  position: 'left',         // 'left' (after breadcrumbs) | 'right' (end of header)
  order: 30,
  icon: Sparkles,
  label: 'My Feature Action',
  onClick: () => {
    console.log('My Feature action clicked');
  },
});
`;
```

**Header Toolbar Types:** `action` (click handler), `toggle` (on/off state), `dropdown` (opens menu), `custom` (full component). See [Header Toolbar Registry](/starter-template/registries/#header-toolbar-registry) for all options.

### Preferences Section

Register a section on the Preferences settings page.

```typescript
export const PREFERENCES_REGISTRATION = `// ========================================================================
// FILE: frontend/src/features/my-feature/registrations/preferences.registration.ts
// PURPOSE: Register preferences section for my-feature
// ========================================================================

import { preferencesRegistry } from '@/config/preferences.registry';
import { MyFeaturePreferences } from '../components/settings/MyFeaturePreferences';

preferencesRegistry.register({
  id: 'my-feature',
  title: 'My Feature',
  component: MyFeaturePreferences,
  order: 50,
});
`;
```

### Integrations

Register a third-party service integration.

```typescript
export const INTEGRATION_REGISTRATION = `// ========================================================================
// FILE: frontend/src/features/my-feature/registrations/integrations.registration.ts
// PURPOSE: Register integration provider for my-feature
// ========================================================================

import { integrationsRegistry } from '@/config/integrations.registry';
import { Cloud } from 'lucide-react';
import { MyFeatureIntegration } from '../components/integrations/MyFeatureIntegration';

integrationsRegistry.register({
  id: 'my-feature',
  name: 'My Feature Service',
  description: 'Connect to My Feature for enhanced functionality',
  icon: Cloud,
  category: 'productivity',  // 'storage' | 'communication' | 'productivity' | 'ai' | 'other'
  component: MyFeatureIntegration,
  order: 50,
});
`;
```

### Personal Info Fields

Add custom fields to the Personal Information settings page.

```typescript
export const PERSONAL_INFO_REGISTRATION = `// ========================================================================
// FILE: frontend/src/features/my-feature/registrations/personal-info.registration.ts
// PURPOSE: Register additional fields for Personal Information page
// ========================================================================

import { personalInfoFieldsRegistry } from '@/config/personal-info-fields.registry';

// Register a category for grouping
personalInfoFieldsRegistry.registerCategory({
  id: 'my-feature',
  label: 'My Feature Settings',
  description: 'Additional profile fields for My Feature',
  order: 50,
});

// Text field
personalInfoFieldsRegistry.register({
  id: 'myFeatureUsername',
  type: 'text',              // 'text' | 'textarea' | 'select' | 'custom'
  label: 'My Feature Username',
  description: 'Your username on My Feature platform',
  placeholder: 'Enter username',
  category: 'my-feature',
  order: 10,
  storage: 'preferences',    // Stored in User.preferences JSON
});

// Select field
personalInfoFieldsRegistry.register({
  id: 'myFeatureRole',
  type: 'select',
  label: 'Role',
  options: [
    { value: 'developer', label: 'Developer' },
    { value: 'designer', label: 'Designer' },
    { value: 'manager', label: 'Manager' },
  ],
  category: 'my-feature',
  order: 20,
  storage: 'preferences',
});
`;
```

### Admin Pages

Register pages in the admin panel.

```typescript
export const ADMIN_PAGES_REGISTRATION = `// ========================================================================
// FILE: frontend/src/features/my-feature/admin-pages.registration.ts
// PURPOSE: Register admin pages for my-feature
// ========================================================================

import { adminPagesRegistry } from '@/config/admin-pages.registry';
import { Sparkles } from 'lucide-react';
import { MyFeatureAdminPage } from './pages/MyFeatureAdminPage';

adminPagesRegistry.register({
  id: 'my-feature',              // URL: /admin/my-feature
  title: 'My Feature Settings',
  description: 'Configure My Feature options',
  icon: Sparkles,
  component: MyFeatureAdminPage,
  order: 50,
  // badge: 'New',               // Optional notification badge
});
`;
```

<Aside type="note">
For the full API reference including notification preferences, language options, and all available methods and hooks, see the [Registry Reference](/starter-template/registries/).
</Aside>

---

## Backend Templates

### Index (Barrel File)

```typescript
// src/templates/backend/routes.ts
export const INDEX_TEMPLATE = `// ========================================================================
// FILE: backend/src/features/my-feature/index.ts
// PURPOSE: Public exports and registry integrations for my-feature
// ========================================================================

import './route.registration.js';
import './service.registration.js';

export { myFeatureRoutes } from './my-feature.routes.js';
export { myFeatureService } from './my-feature.service.js';
export type * from './my-feature.types.js';
`;
```

### Service

```typescript
// src/templates/backend/services.ts
export const SERVICE_TEMPLATE = `// ========================================================================
// FILE: backend/src/features/my-feature/my-feature.service.ts
// PURPOSE: Business logic for my-feature
// ========================================================================

import { prisma } from '../../lib/prisma.js';
import { NotFoundError } from '../../lib/errors.js';
import type { CreateMyFeatureInput, UpdateMyFeatureInput } from './my-feature.types.js';

export const myFeatureService = {
  async getAll(userId: string) {
    return prisma.my_feature_item.findMany({
      where: { userId },
      orderBy: { createdAt: 'desc' },
    });
  },

  async getById(id: string, userId: string) {
    const item = await prisma.my_feature_item.findFirst({
      where: { id, userId },
    });
    if (!item) {
      throw new NotFoundError('Item not found');
    }
    return item;
  },

  async create(userId: string, data: CreateMyFeatureInput) {
    return prisma.my_feature_item.create({
      data: { userId, ...data },
    });
  },

  async update(id: string, userId: string, data: UpdateMyFeatureInput) {
    await this.getById(id, userId);
    return prisma.my_feature_item.update({
      where: { id },
      data,
    });
  },

  async delete(id: string, userId: string) {
    await this.getById(id, userId);
    await prisma.my_feature_item.delete({ where: { id } });
  },
};
`;
```

### Routes

```typescript
export const ROUTES_TEMPLATE = `// ========================================================================
// FILE: backend/src/features/my-feature/my-feature.routes.ts
// PURPOSE: API routes for my-feature
// ========================================================================

import { Router } from 'express';
import { myFeatureService } from './my-feature.service.js';

const router = Router();

router.get('/', async (req, res, next) => {
  try {
    const items = await myFeatureService.getAll(req.user!.id);
    res.json(items);
  } catch (error) {
    next(error);
  }
});

router.get('/:id', async (req, res, next) => {
  try {
    const item = await myFeatureService.getById(req.params.id, req.user!.id);
    res.json(item);
  } catch (error) {
    next(error);
  }
});

router.post('/', async (req, res, next) => {
  try {
    const item = await myFeatureService.create(req.user!.id, req.body);
    res.status(201).json(item);
  } catch (error) {
    next(error);
  }
});

router.patch('/:id', async (req, res, next) => {
  try {
    const item = await myFeatureService.update(req.params.id, req.user!.id, req.body);
    res.json(item);
  } catch (error) {
    next(error);
  }
});

router.delete('/:id', async (req, res, next) => {
  try {
    await myFeatureService.delete(req.params.id, req.user!.id);
    res.status(204).send();
  } catch (error) {
    next(error);
  }
});

export const myFeatureRoutes = router;
`;
```

### Route Registration

```typescript
// src/templates/backend/registrations.ts
export const ROUTE_REGISTRATION = `// ========================================================================
// FILE: backend/src/features/my-feature/route.registration.ts
// PURPOSE: Register routes with the route registry
// ========================================================================

import { routeRegistry } from '../../config/route.registry.js';
import { myFeatureRoutes } from './my-feature.routes.js';

routeRegistry.register({
  path: '/my-feature',
  router: myFeatureRoutes,
  feature: 'my-feature',
  versions: ['v1'],           // Mounted at /api/v1/my-feature
  requiresAuth: true,
  description: 'My Feature management',
  // middleware: [],           // Additional middleware
  // deprecated: false,        // Mark as deprecated
});
`;
```

### Service Registration

Uses TypeScript **type augmentation** for type-safe access to services across features.

```typescript
export const SERVICE_REGISTRATION = `// ========================================================================
// FILE: backend/src/features/my-feature/service.registration.ts
// PURPOSE: Register service with the service registry
// ========================================================================

import { serviceRegistry } from '../../config/service.registry.js';
import { myFeatureService } from './my-feature.service.js';

// Type augmentation enables: serviceRegistry.get('my-feature')
declare module '../../config/service.registry.js' {
  interface ServiceTypes {
    'my-feature': typeof myFeatureService;
  }
}

serviceRegistry.register('my-feature', myFeatureService, {
  feature: 'my-feature',
  description: 'My Feature business logic',
  version: '1.0.0',
});
`;
```

<Aside type="tip">
For plugins or runtime-loaded modules, use `serviceRegistry.registerDynamic()` and `serviceRegistry.getDynamic<T>()` instead of type augmentation. See [Service Registry reference](/starter-template/registries/#service-registry) for details.
</Aside>

### Types

```typescript
// src/templates/backend/types.ts
export const TYPES_TEMPLATE = `// ========================================================================
// FILE: backend/src/features/my-feature/my-feature.types.ts
// PURPOSE: TypeScript types for my-feature
// ========================================================================

export interface CreateMyFeatureInput {
  title: string;
  description?: string;
}

export interface UpdateMyFeatureInput {
  title?: string;
  description?: string;
}
`;
```

---

## Prisma Schema

<Aside type="caution">
Module schemas must be **self-contained** with **no `@relation` directives**. Use plain foreign keys with indexes instead.
</Aside>

```typescript
// src/templates/schema.ts
export const SCHEMA_TEMPLATE = `// ========================================================================
// FILE: backend/prisma/schema/my-feature.prisma
// PURPOSE: Database models for my-feature
// ========================================================================

model my_feature_item {
  id          String   @id @default(cuid())
  userId      String                          // Plain FK, NOT a @relation
  title       String
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([userId])
}

model my_feature_settings {
  id        String   @id @default(cuid())
  userId    String   @unique              // One settings per user
  enabled   Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([userId])
}
`;
```

### Why No Relations?

Modules are installed independently and may be uninstalled. Using `@relation` would:
1. Require modifying the `User` model (which modules shouldn't do)
2. Create migration dependencies between modules
3. Cause issues when uninstalling modules

Instead, use plain foreign keys with indexes for performance.

---

## Next Steps

- [Lifecycle Hooks](/module-starter/lifecycle-hooks/) — Filters and actions
- [File Reference](/module-starter/file-reference/) — File organisation and naming conventions
- [Building Your Module](/module-starter/building-modules/) — Template authoring and configuration
- [Registry Guide](/module-starter/registry-guide/) — How to register with each registry
