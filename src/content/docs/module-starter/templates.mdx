---
title: Code Templates
description: Copy-paste templates for module development
---

import { Aside, Tabs, TabItem } from '@astrojs/starlight/components';

These templates are ready to copy into your module's `src/templates/` directory. Remember to use `my-feature` as the placeholderâ€”it gets replaced with the actual module name during installation.

<Aside type="tip">
All templates should include the standard file header with `FILE:` and `PURPOSE:` comments.
</Aside>

---

## Frontend Templates

### Index (Barrel File)

```typescript
// src/templates/frontend/routes.ts
export const INDEX_TEMPLATE = `// ========================================================================
// FILE: frontend/src/features/my-feature/index.ts
// PURPOSE: Public exports and registry integrations for my-feature
// ========================================================================

// ========================================================================
// REGISTRATION IMPORTS (side effects)
// These MUST come first - they register the module with app registries
// ========================================================================

import './navigation.registration';
// import './registrations/dashboard.registration';
// import './registrations/preferences.registration';
// import './filter.registration';
// import './action.registration';

// ========================================================================
// PUBLIC EXPORTS
// ========================================================================

export { myFeatureRoutes } from './routes.config';
export { MyFeaturePage } from './pages/MyFeaturePage';
`;
```

### Navigation Registration

```typescript
// src/templates/frontend/registrations.ts
export const NAVIGATION_REGISTRATION = `// ========================================================================
// FILE: frontend/src/features/my-feature/navigation.registration.ts
// PURPOSE: Register navigation items for my-feature
// ========================================================================

import { navigationRegistry } from '@/config/navigation.registry';
import { Box } from 'lucide-react';

navigationRegistry.registerMain({
  id: 'my-feature',
  title: 'My Feature',
  url: '/dashboard/my-feature',
  icon: Box,
  order: 50,
});
`;
```

### Routes Configuration

```typescript
export const ROUTES_CONFIG = `// ========================================================================
// FILE: frontend/src/features/my-feature/routes.config.tsx
// PURPOSE: Route definitions for my-feature
// ========================================================================

import { lazy } from 'react';
import type { RouteObject } from 'react-router-dom';

const MyFeaturePage = lazy(() =>
  import('./pages/MyFeaturePage').then((m) => ({ default: m.MyFeaturePage }))
);

export const myFeatureRoutes: RouteObject[] = [
  {
    path: 'my-feature',
    element: <MyFeaturePage />,
  },
];
`;
```

### Page Component

```typescript
// src/templates/frontend/pages.ts
export const PAGE_TEMPLATE = `// ========================================================================
// FILE: frontend/src/features/my-feature/pages/MyFeaturePage.tsx
// PURPOSE: Main page for my-feature
// ========================================================================

import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';

export function MyFeaturePage() {
  return (
    <div>
      {/* Page Header */}
      <div className="mb-6">
        <h1 className="text-xl font-semibold tracking-tight">My Feature</h1>
        <p className="mt-1 text-sm text-muted-foreground">
          Description of what this feature does.
        </p>
      </div>

      {/* Page Content */}
      <Card>
        <CardHeader>
          <CardTitle>Getting Started</CardTitle>
          <CardDescription>
            Welcome to My Feature.
          </CardDescription>
        </CardHeader>
        <CardContent>
          <p className="text-sm text-muted-foreground">
            This is a placeholder. Replace with your feature's UI.
          </p>
          <Button className="mt-4">Get Started</Button>
        </CardContent>
      </Card>
    </div>
  );
}
`;
```

### Dashboard Widget

<Tabs>
  <TabItem label="Component">
```typescript
// src/templates/frontend/components.ts
export const WIDGET_COMPONENT_TEMPLATE = `// ========================================================================
// FILE: frontend/src/features/my-feature/components/widgets/MyFeatureWidget.tsx
// PURPOSE: Dashboard widget for my-feature
// ========================================================================

import type { DashboardWidgetProps } from '@/config/dashboard.registry';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';

export function MyFeatureWidget({ widget }: DashboardWidgetProps) {
  return (
    <Card className="h-full">
      <CardHeader className="pb-2">
        <CardTitle className="text-sm font-medium">{widget.title}</CardTitle>
      </CardHeader>
      <CardContent>
        <div className="text-2xl font-bold">--</div>
        <p className="text-xs text-muted-foreground">Widget content</p>
      </CardContent>
    </Card>
  );
}
`;
```
  </TabItem>
  <TabItem label="Registration">
```typescript
export const DASHBOARD_REGISTRATION = `// ========================================================================
// FILE: frontend/src/features/my-feature/registrations/dashboard.registration.ts
// PURPOSE: Dashboard widget registration for my-feature
// ========================================================================

import { dashboardRegistry } from '@/config/dashboard.registry';
import { MyFeatureWidget } from '../components/widgets/MyFeatureWidget';

dashboardRegistry.register({
  id: 'my-feature-widget',
  title: 'My Feature',
  component: MyFeatureWidget,
  size: '1x1',
  order: 50,
  category: 'general',
  description: 'My Feature overview widget',
});
`;
```
  </TabItem>
</Tabs>

### Settings Page

<Tabs>
  <TabItem label="Component">
```typescript
export const SETTINGS_PAGE_COMPONENT_TEMPLATE = `// ========================================================================
// FILE: frontend/src/features/my-feature/components/settings/MyFeatureSettings.tsx
// PURPOSE: Settings page content for my-feature
// ========================================================================

import {
  SettingsToggleRow,
  SettingsSectionHeader,
} from '@/features/user/components/settings/SettingsComponents';
import { useState } from 'react';

export function MyFeatureSettings() {
  const [enabled, setEnabled] = useState(true);

  return (
    <div className="space-y-6">
      <SettingsSectionHeader
        title="My Feature Settings"
        description="Configure my-feature options"
      />

      <SettingsToggleRow
        label="Enable Feature"
        description="Turn this feature on or off"
        checked={enabled}
        onCheckedChange={setEnabled}
      />
    </div>
  );
}
`;
```
  </TabItem>
  <TabItem label="Registration">
```typescript
export const SETTINGS_PAGE_REGISTRATION = `// ========================================================================
// FILE: frontend/src/features/my-feature/registrations/settings-pages.registration.ts
// PURPOSE: Settings page registration for my-feature
// ========================================================================

import { settingsPagesRegistry } from '@/config/settings-pages.registry';
import { Box } from 'lucide-react';
import { MyFeatureSettings } from '../components/settings/MyFeatureSettings';

settingsPagesRegistry.register({
  id: 'my-feature',
  title: 'My Feature',
  description: 'Configure my-feature options',
  icon: Box,
  component: MyFeatureSettings,
  order: 70,
});
`;
```
  </TabItem>
</Tabs>

---

## Backend Templates

### Index (Barrel File)

```typescript
// src/templates/backend/routes.ts
export const INDEX_TEMPLATE = `// ========================================================================
// FILE: backend/src/features/my-feature/index.ts
// PURPOSE: Public exports and registry integrations for my-feature
// ========================================================================

import './route.registration.js';
import './service.registration.js';

export { myFeatureRoutes } from './my-feature.routes.js';
export { myFeatureService } from './my-feature.service.js';
export type * from './my-feature.types.js';
`;
```

### Service

```typescript
// src/templates/backend/services.ts
export const SERVICE_TEMPLATE = `// ========================================================================
// FILE: backend/src/features/my-feature/my-feature.service.ts
// PURPOSE: Business logic for my-feature
// ========================================================================

import { prisma } from '../../lib/prisma.js';
import { NotFoundError } from '../../lib/errors.js';
import type { CreateMyFeatureInput, UpdateMyFeatureInput } from './my-feature.types.js';

export const myFeatureService = {
  async getAll(userId: string) {
    return prisma.my_feature_item.findMany({
      where: { userId },
      orderBy: { createdAt: 'desc' },
    });
  },

  async getById(id: string, userId: string) {
    const item = await prisma.my_feature_item.findFirst({
      where: { id, userId },
    });
    if (!item) {
      throw new NotFoundError('Item not found');
    }
    return item;
  },

  async create(userId: string, data: CreateMyFeatureInput) {
    return prisma.my_feature_item.create({
      data: { userId, ...data },
    });
  },

  async update(id: string, userId: string, data: UpdateMyFeatureInput) {
    await this.getById(id, userId);
    return prisma.my_feature_item.update({
      where: { id },
      data,
    });
  },

  async delete(id: string, userId: string) {
    await this.getById(id, userId);
    await prisma.my_feature_item.delete({ where: { id } });
  },
};
`;
```

### Routes

```typescript
export const ROUTES_TEMPLATE = `// ========================================================================
// FILE: backend/src/features/my-feature/my-feature.routes.ts
// PURPOSE: API routes for my-feature
// ========================================================================

import { Router } from 'express';
import { myFeatureService } from './my-feature.service.js';

const router = Router();

router.get('/', async (req, res, next) => {
  try {
    const items = await myFeatureService.getAll(req.user!.id);
    res.json(items);
  } catch (error) {
    next(error);
  }
});

router.get('/:id', async (req, res, next) => {
  try {
    const item = await myFeatureService.getById(req.params.id, req.user!.id);
    res.json(item);
  } catch (error) {
    next(error);
  }
});

router.post('/', async (req, res, next) => {
  try {
    const item = await myFeatureService.create(req.user!.id, req.body);
    res.status(201).json(item);
  } catch (error) {
    next(error);
  }
});

router.patch('/:id', async (req, res, next) => {
  try {
    const item = await myFeatureService.update(req.params.id, req.user!.id, req.body);
    res.json(item);
  } catch (error) {
    next(error);
  }
});

router.delete('/:id', async (req, res, next) => {
  try {
    await myFeatureService.delete(req.params.id, req.user!.id);
    res.status(204).send();
  } catch (error) {
    next(error);
  }
});

export const myFeatureRoutes = router;
`;
```

### Route Registration

```typescript
// src/templates/backend/registrations.ts
export const ROUTE_REGISTRATION = `// ========================================================================
// FILE: backend/src/features/my-feature/route.registration.ts
// PURPOSE: Register routes with the route registry
// ========================================================================

import { routeRegistry } from '../../config/route.registry.js';
import { myFeatureRoutes } from './my-feature.routes.js';

routeRegistry.register({
  path: '/my-feature',
  router: myFeatureRoutes,
  feature: 'my-feature',
  versions: ['v1'],
  requiresAuth: true,
  description: 'My Feature management',
});
`;
```

### Service Registration

```typescript
export const SERVICE_REGISTRATION = `// ========================================================================
// FILE: backend/src/features/my-feature/service.registration.ts
// PURPOSE: Register service with the service registry
// ========================================================================

import { serviceRegistry } from '../../config/service.registry.js';
import { myFeatureService } from './my-feature.service.js';

declare module '../../config/service.registry.js' {
  interface ServiceTypes {
    'my-feature': typeof myFeatureService;
  }
}

serviceRegistry.register('my-feature', myFeatureService, {
  feature: 'my-feature',
  description: 'My Feature business logic',
  version: '1.0.0',
});
`;
```

### Types

```typescript
// src/templates/backend/types.ts
export const TYPES_TEMPLATE = `// ========================================================================
// FILE: backend/src/features/my-feature/my-feature.types.ts
// PURPOSE: TypeScript types for my-feature
// ========================================================================

export interface CreateMyFeatureInput {
  title: string;
  description?: string;
}

export interface UpdateMyFeatureInput {
  title?: string;
  description?: string;
}
`;
```

---

## Prisma Schema

<Aside type="caution">
Module schemas must be **self-contained** with **no `@relation` directives**. Use plain foreign keys with indexes instead.
</Aside>

```typescript
// src/templates/schema.ts
export const SCHEMA_TEMPLATE = `// ========================================================================
// FILE: backend/prisma/schema/my-feature.prisma
// PURPOSE: Database models for my-feature
// ========================================================================

model my_feature_item {
  id          String   @id @default(cuid())
  userId      String                          // Plain FK, NOT a @relation
  title       String
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([userId])
}

model my_feature_settings {
  id        String   @id @default(cuid())
  userId    String   @unique              // One settings per user
  enabled   Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([userId])
}
`;
```

### Why No Relations?

Modules are installed independently and may be uninstalled. Using `@relation` would:
1. Require modifying the `User` model (which modules shouldn't do)
2. Create migration dependencies between modules
3. Cause issues when uninstalling modules

Instead, use plain foreign keys with indexes for performance.

---

## Next Steps

- [Lifecycle Hooks](/module-starter/lifecycle-hooks/) - Filters and actions
- [Module Structure](/module-starter/module-structure/) - File organisation
- [Creating Modules](/module-starter/creating-modules/) - Step-by-step guide
