---
title: File Reference
description: File structure, naming conventions, and patterns for module packages
---

import { FileTree, Aside, Tabs, TabItem } from '@astrojs/starlight/components';

This page documents the file structure, naming conventions, and organisational patterns used across module packages and their generated output.

---

## Module Package Structure

This is what a cloned module looks like after running the create script:

<FileTree>
- my-module/
  - src/
    - module.ts *(EDIT - module configuration)*
    - cli.ts *(DO NOT EDIT)*
    - index.ts *(exports)*
    - scaffold/ *(DO NOT EDIT - shared infrastructure)*
      - init.ts *(installation pipeline)*
      - update.ts *(hash-based change detection)*
      - uninstall.ts *(manifest-based cleanup)*
      - enable.ts *(re-enable disabled modules)*
      - disable.ts *(disable without removing)*
      - update-schema.ts *(Prisma schema sync)*
      - lifecycle-utils.ts *(lifecycle hook infrastructure)*
      - types.ts *(TypeScript interfaces)*
      - utils.ts *(shared utilities)*
      - index.ts *(public exports)*
    - templates/ *(EDIT - your file templates)*
      - schema.ts
      - frontend/
        - index.ts
        - routes.ts
        - pages.ts
        - components.ts
        - registrations.ts
        - services.ts
        - types.ts
      - backend/
        - index.ts
        - routes.ts
        - services.ts
        - registrations.ts
        - types.ts
  - scripts/ *(version bump scripts)*
  - dist/ *(built output)*
  - package.json
  - VERSION *(scaffold version)*
  - CLAUDE.md *(AI instructions)*
  - README.md
</FileTree>

### Key Files

| File | Purpose | Edit? |
|------|---------|-------|
| `src/module.ts` | Module ID, name, templates, configuration | Yes |
| `src/templates/**/*.ts` | File content templates | Yes |
| `src/cli.ts` | CLI command handling | No |
| `src/scaffold/**/*.ts` | Scaffolding infrastructure | No |
| `package.json` | Package name, version, bin command | Yes |
| `VERSION` | Scaffold infrastructure version | Auto |

---

## Generated Output Structure

When users run `npx my-module init`, this structure is created in the target app:

<Tabs>
  <TabItem label="Frontend">
    <FileTree>
    - frontend/src/features/[module]/
      - index.ts *(barrel exports + registration imports)*
      - navigation.registration.ts
      - routes.config.tsx
      - pages/
        - [Module]Page.tsx
      - components/
        - widgets/ *(optional)*
        - settings/ *(optional)*
      - hooks/ *(optional)*
      - services/ *(optional)*
      - types/ *(optional)*
      - registrations/ *(optional)*
        - dashboard.registration.ts
        - preferences.registration.ts
        - ...
    </FileTree>
  </TabItem>
  <TabItem label="Backend">
    <FileTree>
    - backend/src/features/[module]/
      - index.ts *(barrel exports + registration imports)*
      - [module].routes.ts
      - [module].service.ts
      - [module].types.ts
      - route.registration.ts
      - service.registration.ts
    </FileTree>
  </TabItem>
  <TabItem label="Database">
    <FileTree>
    - backend/prisma/
      - schema/ *(multi-file mode)*
        - [module].prisma
      - schema.prisma *(single-file mode - appended)*
    </FileTree>
  </TabItem>
</Tabs>

---

## Naming Conventions

### File Names

| Type | Convention | Example |
|------|------------|---------|
| Module folder | kebab-case | `ai-chat` |
| Routes file | `[module].routes.ts` | `ai-chat.routes.ts` |
| Service file | `[module].service.ts` | `ai-chat.service.ts` |
| Types file | `[module].types.ts` | `ai-chat.types.ts` |
| Page component | `[Module]Page.tsx` | `AiChatPage.tsx` |
| Registration files | `*.registration.ts` | `navigation.registration.ts` |

### Export Names

| Type | Convention | Example |
|------|------------|---------|
| Routes array | `[module]Routes` (camelCase) | `aiChatRoutes` |
| Service object | `[module]Service` (camelCase) | `aiChatService` |
| Main hook | `use[Module]` (camelCase) | `useAiChat` |
| Page component | `[Module]Page` (PascalCase) | `AiChatPage` |
| Widget component | `[Module]Widget` (PascalCase) | `AiChatWidget` |

---

## Index File Patterns

Each generated feature folder has a barrel `index.ts`. Side-effect registration imports come first, then public exports.

### Frontend Index

```typescript
// frontend/src/features/[module]/index.ts

// ========================================================================
// REGISTRATION IMPORTS (side effects)
// These MUST come first - they register with app registries
// ========================================================================

import './navigation.registration';
// import './registrations/dashboard.registration';
// import './registrations/preferences.registration';
// import './filter.registration';
// import './action.registration';

// ========================================================================
// PUBLIC EXPORTS
// ========================================================================

export { moduleRoutes } from './routes.config';
export { ModulePage } from './pages/ModulePage';
// export { useModule } from './hooks/useModule';
// export type { ModuleItem } from './types';
```

### Backend Index

```typescript
// backend/src/features/[module]/index.ts

// ========================================================================
// REGISTRATION IMPORTS (side effects)
// ========================================================================

import './route.registration.js';
import './service.registration.js';
// import './filter.registration.js';
// import './action.registration.js';

// ========================================================================
// PUBLIC EXPORTS
// ========================================================================

export { moduleRoutes } from './[module].routes.js';
export { moduleService } from './[module].service.js';
export type * from './[module].types.js';
```

<Aside type="caution">
Backend imports **must** use the `.js` extension for all relative imports. This is required for ESM compatibility.
</Aside>

Registration files are imported as side effects -- they run code on import and do not need to export anything. For details on which registries are available and how to use them, see [Registry Guide](/module-starter/registry-guide/).

---

## Template Organisation

### Split by Category

Templates are organised by file type for maintainability. These are the default files. Add more as your module grows (e.g., `hooks.ts`, `middleware.ts`, `dialogs.ts`):

```
src/templates/
├── frontend/
│   ├── index.ts        # Re-exports all frontend templates
│   ├── routes.ts       # INDEX_TEMPLATE, ROUTES_CONFIG
│   ├── pages.ts        # PAGE_TEMPLATE, SETTINGS_PAGE_TEMPLATE
│   ├── components.ts   # WIDGET_TEMPLATE, etc.
│   ├── registrations.ts # All *_REGISTRATION templates
│   ├── services.ts     # SERVICE_TEMPLATE
│   ├── types.ts        # TYPES_TEMPLATE
│   └── hooks.ts        # (custom) Hook templates
├── backend/
│   ├── index.ts        # Re-exports all backend templates
│   ├── routes.ts       # INDEX_TEMPLATE, ROUTES_TEMPLATE
│   ├── services.ts     # SERVICE_TEMPLATE
│   ├── registrations.ts # ROUTE_REGISTRATION, SERVICE_REGISTRATION
│   ├── types.ts        # TYPES_TEMPLATE
│   └── middleware.ts   # (custom) Middleware templates
└── schema.ts           # SCHEMA_TEMPLATE
```

<Aside type="tip">
The files above are starting points. Larger modules often add custom template files for hooks, dialogs, context providers, utilities, and more. See [Creating Modules -- Adding Custom Template Files](/module-starter/building-modules/#adding-custom-template-files) for instructions.
</Aside>

### Template Naming

| Constant | Purpose |
|----------|---------|
| `INDEX_TEMPLATE` | Barrel file (index.ts) |
| `ROUTES_CONFIG` | React Router routes |
| `PAGE_TEMPLATE` | Main page component |
| `ROUTES_TEMPLATE` | Express router |
| `SERVICE_TEMPLATE` | Business logic |
| `*_REGISTRATION` | Registry registration files |
| `SCHEMA_TEMPLATE` | Prisma models |

---

## Next Steps

- [Registry Integration](/module-starter/registry-guide/) -- All available registries and how to use them
- [Scaffold Architecture](/module-starter/scaffold/) -- How the scaffold infrastructure works
- [Code Templates](/module-starter/templates/) -- Copy-paste templates for all file types
- [Lifecycle Hooks](/module-starter/lifecycle-hooks/) -- Filters, actions, and module lifecycle
- [Creating Modules](/module-starter/building-modules/) -- Step-by-step guide
