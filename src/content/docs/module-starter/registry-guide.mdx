---
title: Registry Guide
description: How to register your module with the starter template's registries
---

import { Aside, Tabs, TabItem } from '@astrojs/starlight/components';

This is the practical guide for registering your module with each registry. Every example is concise. For full copy-paste templates, see [Code Templates](/module-starter/templates/). For the complete API reference, see [Registry Reference](/starter-template/registries/). For the architecture perspective, see [Starter Integration](/module-starter/starter-integration/).

---

## How Registration Works

Registration files are imported as **side effects** in your feature's barrel `index.ts`. They run on import and don't export anything. The pattern is always the same: side-effect imports first, then exports.

```typescript
// index.ts
import './navigation.registration';
import './registrations/dashboard.registration';
import './registrations/settings-page.registration';

export { myFeatureRoutes } from './routes.config';
export { MyFeaturePage } from './pages/MyFeaturePage';
```

Each registration file imports a registry and calls its `register()` method. The app picks it up automatically.

See [File Reference — Index File Patterns](/module-starter/file-reference/#index-file-patterns) for full barrel file examples.

---

## Frontend Registries

### Navigation

```typescript
import { navigationRegistry } from '@/config/navigation.registry';
import { MessageSquare } from 'lucide-react';

navigationRegistry.registerMain({
  id: 'my-feature',
  title: 'My Feature',
  url: '/my-feature',
  icon: MessageSquare,
  order: 50,
});
```

Other methods: `registerSecondary()` (bottom sidebar), `registerUserMenu()` (user dropdown), `registerSection()` (group label for sidebar items).

---

### Dashboard

```typescript
import { dashboardRegistry } from '@/config/dashboard.registry';
import { MyFeatureWidget } from '../components/widgets/MyFeatureWidget';

dashboardRegistry.register({
  id: 'my-feature-overview',
  title: 'My Feature',
  component: MyFeatureWidget,
  size: '2x1',        // '1x1' | '2x1' | '1x2' | '2x2' | 'full'
  order: 50,
  category: 'activity',
  canHide: true,
});
```

Your widget component receives `DashboardWidgetProps`:

```typescript
interface DashboardWidgetProps {
  widget: DashboardWidget;
  isCompact?: boolean;
}
```

---

### Settings Pages

<Tabs>
  <TabItem label="New Page">
    ```typescript
    import { settingsPagesRegistry } from '@/config/settings-pages.registry';
    import { Sparkles } from 'lucide-react';
    import { MyFeatureSettingsPage } from '../pages/MyFeatureSettingsPage';

    settingsPagesRegistry.register({
      id: 'my-feature',
      title: 'My Feature',
      icon: Sparkles,
      component: MyFeatureSettingsPage,
      order: 60,
    });
    ```
  </TabItem>
  <TabItem label="Replace Placeholder">
    ```typescript
    import { settingsPagesRegistry } from '@/config/settings-pages.registry';
    import { CreditCard } from 'lucide-react';
    import { BillingPage } from '../pages/BillingPage';

    settingsPagesRegistry.register({
      id: 'billing',           // Must match existing placeholder ID
      title: 'Billing',
      icon: CreditCard,
      component: BillingPage,
      isReplacement: true,     // Replaces the placeholder
      order: 50,
    });
    ```
  </TabItem>
</Tabs>

---

### Admin Pages

```typescript
import { adminPagesRegistry } from '@/config/admin-pages.registry';
import { Sparkles } from 'lucide-react';
import { MyFeatureAdminPage } from './pages/MyFeatureAdminPage';

adminPagesRegistry.register({
  id: 'my-feature',               // URL: /admin/my-feature
  title: 'My Feature Settings',
  description: 'Configure My Feature options',
  icon: Sparkles,
  component: MyFeatureAdminPage,
  order: 50,
});
```

---

### Preferences

```typescript
import { preferencesRegistry } from '@/config/preferences.registry';
import { MyFeaturePreferences } from '../components/settings/MyFeaturePreferences';

preferencesRegistry.register({
  id: 'my-feature',
  title: 'My Feature',
  component: MyFeaturePreferences,
  order: 50,
});
```

---

### Integrations

```typescript
import { integrationsRegistry } from '@/config/integrations.registry';
import { Cloud } from 'lucide-react';
import { MyFeatureIntegration } from '../components/integrations/MyFeatureIntegration';

integrationsRegistry.register({
  id: 'my-feature',
  name: 'My Feature Service',
  description: 'Connect to My Feature for enhanced functionality',
  icon: Cloud,
  // category: 'storage' | 'communication' | 'productivity' | 'developer' | 'social' | 'other'
  category: 'productivity',
  component: MyFeatureIntegration,
  order: 50,
});
```

---

### Header Toolbar

```typescript
import { headerToolbarRegistry } from '@/config/header-toolbar.registry';
import { Sparkles } from 'lucide-react';

headerToolbarRegistry.register({
  id: 'my-feature-action',
  type: 'action',             // 'action' | 'toggle' | 'dropdown' | 'custom'
  position: 'left',
  order: 50,
  icon: Sparkles,
  label: 'My Feature Action',
  onClick: () => { /* handler */ },
});
```

**Item types:**

| Type | Description | Required Props |
|------|-------------|----------------|
| `action` | Simple button | `onClick`, `icon` |
| `toggle` | Toggle button with state | `onClick`, `isActive`, `icon` |
| `dropdown` | Opens a dropdown menu | `component`, `icon` |
| `custom` | Fully custom component | `component` |

---

### Personal Info Fields

```typescript
import { personalInfoFieldsRegistry } from '@/config/personal-info-fields.registry';

personalInfoFieldsRegistry.registerCategory({
  id: 'my-feature',
  label: 'My Feature Settings',
  order: 50,
});

personalInfoFieldsRegistry.register({
  id: 'myFeatureUsername',
  type: 'text',               // 'text' | 'textarea' | 'select' | 'custom'
  label: 'My Feature Username',
  category: 'my-feature',
  order: 10,
  storage: 'preferences',
});
```

**Field types:** `text`, `textarea`, `select`, `custom`

**Storage options:**
- `profile` — Stored in User model fields (name, bio, etc.)
- `preferences` — Stored in `User.preferences` JSON (recommended for modules — avoids modifying the User model)

---

## Backend Registries

Backend imports use `.js` extensions and relative paths. This is an ESM requirement.

### Routes

```typescript
import { routeRegistry } from '../../config/route.registry.js';
import { myFeatureRoutes } from './my-feature.routes.js';

routeRegistry.register({
  path: '/my-feature',
  router: myFeatureRoutes,
  feature: 'my-feature',
  versions: ['v1'],           // Mounted at /api/v1/my-feature
  requiresAuth: true,
  description: 'My Feature management',
});
```

Routes registered with `requiresAuth: true` (the default) automatically have the `requireAuth` middleware applied. This means every request must include a valid JWT token — which the frontend `api` client injects automatically.

**Frontend counterpart:** Your frontend service should call these routes using the shared `api` client:

```typescript
// Frontend: frontend/src/features/my-feature/services/myFeature.service.ts
import { api } from '@/lib/api';

// This automatically includes the auth token — matches the backend's requiresAuth
const { data } = await api.get('/api/v1/my-feature');
```

<Aside type="caution">
Never use `fetch()` or create a separate Axios instance in frontend code. The shared `api` client from `@/lib/api` is the **only** way to make authenticated API calls. See [Auth Feature — API Client](/starter-template/auth-feature/#the-api-client) for details.
</Aside>

---

### Services

```typescript
import { serviceRegistry } from '../../config/service.registry.js';
import { myFeatureService } from './my-feature.service.js';

// Type augmentation for type-safe access
declare module '../../config/service.registry.js' {
  interface ServiceTypes {
    'my-feature': typeof myFeatureService;
  }
}

serviceRegistry.register('my-feature', myFeatureService, {
  feature: 'my-feature',
  description: 'My Feature business logic',
});
```

---

## Filters & Actions

Filters transform data through a pipeline. Each filter receives the previous filter's output and returns a modified value. Actions fire side effects and don't return values. Both are available on frontend and backend.

See [Lifecycle Hooks](/module-starter/lifecycle-hooks/) for the full reference including registration methods, applying filters, triggering actions, and common hook points.

---

## Order Convention

All registries use a **0-100 scale**. Lower numbers appear first. The default varies per registry (typically `10`), but you should always set an explicit value.

| Range | Purpose | Examples |
|-------|---------|----------|
| **0-25** | Primary features | Dashboard (10), Home (15) |
| **26-50** | Core features | Projects (30), Documents (40) |
| **51-75** | Secondary features | Settings (60), Reports (65) |
| **76-100** | Utilities | Help (80), Admin (90) |

Admins can override order values via the admin panel.

<Aside type="tip">
Use `50` for most modules. It places your feature in the middle and leaves room for admins to reorder.
</Aside>

---

## Next Steps

- [Code Templates](/module-starter/templates/) — Full copy-paste templates for every registry
- [Registry Reference](/starter-template/registries/) — Complete API reference with all fields and types
- [Auth Feature — API Client](/starter-template/auth-feature/#the-api-client) — How the shared API client works (essential for frontend services)
- [Lifecycle Hooks](/module-starter/lifecycle-hooks/) — Filters, actions, and module lifecycle hooks
- [Starter Integration](/module-starter/starter-integration/) — Architecture and sync guide
