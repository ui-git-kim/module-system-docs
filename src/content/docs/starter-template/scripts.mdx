---
title: CLI Scripts
description: Create apps, update from template, and customize scripts
---

import { Aside, FileTree, Tabs, TabItem } from '@astrojs/starlight/components';

The starter template includes shell scripts for creating new apps and keeping them updated with template changes. Both PowerShell (`.ps1`) and Bash (`.sh`) versions are provided.

<Aside type="tip">
  For a step-by-step walkthrough of the create script prompts, see [Create Script Walkthrough](/starter-template/create-script/).
</Aside>

## create-app

Creates a new app from the template, preserving git history for future updates.

### Usage

**Windows (PowerShell):**
```powershell
.\create-app.ps1
```

**macOS/Linux:**
```bash
./create-app.sh
```

### What It Does

1. **Prompts for configuration:**
   - App name
   - Output directory
   - Template source (local or GitHub)
   - Database type (Neon or standard PostgreSQL)

2. **Clones the template:**
   - Preserves full git history (enables updates)
   - Removes `origin` remote (local-only by default)
   - Removes template-only files

3. **Installs dependencies:**
   - Root dependencies (concurrently)
   - Frontend dependencies (React, Vite, Tailwind, etc.)
   - Backend dependencies (Express, Prisma, etc.)

4. **Initialises shadcn/ui:**
   - Runs `shadcn init`
   - Adds required components (sidebar, dropdown-menu, etc.)

5. **Configures environment:**
   - Prompts for database URLs
   - Prompts for Neon Auth URL
   - Creates `.env` files for frontend and backend

6. **Sets up database:**
   - Runs `prisma generate`
   - Runs `prisma migrate dev --name init`

7. **Creates initial commit:**
   - Commits all files with "Initialize [app] from template"

8. **Optional: configures app remote:**
   - Prompts for your app's git repository URL

### Database Configuration

#### Neon (Recommended)

Neon requires two connection URLs:

| Variable | Description |
|----------|-------------|
| `DATABASE_URL` | Pooled connection (has `-pooler` in hostname) |
| `DIRECT_DATABASE_URL` | Direct connection for migrations |

#### Standard PostgreSQL

For other providers (Supabase, Railway, local, etc.):

| Variable | Description |
|----------|-------------|
| `DATABASE_URL` | Standard PostgreSQL connection string |

### Output Structure

After running, you'll have:

```
my-app/
├── frontend/
│   ├── .env              # Frontend environment
│   └── ...
├── backend/
│   ├── .env              # Backend environment
│   └── ...
├── .git/                 # Preserves template history
└── ...
```

---

## update-template

Merges updates from the upstream template into your app.

### Usage

**Windows (PowerShell):**
```powershell
# Interactive mode
.\update-template.ps1

# Preview changes only
.\update-template.ps1 -Preview

# Merge directly
.\update-template.ps1 -Merge

# Rebase (rewrites history)
.\update-template.ps1 -Rebase
```

**macOS/Linux:**
```bash
# Interactive mode
./update-template.sh

# Preview changes only
./update-template.sh --preview

# Merge directly
./update-template.sh --merge

# Rebase (rewrites history)
./update-template.sh --rebase
```

Or use npm scripts:

```bash
npm run template:check   # Preview changes
npm run template:update  # Merge changes
```

### What It Does

1. **Checks prerequisites:**
   - Git installed
   - In a git repository
   - Working directory is clean

2. **Sets up template remote:**
   - Adds `template-upstream` remote (if not exists)
   - Configures as pull-only (push disabled)

3. **Fetches updates:**
   - Fetches from `template-upstream/main`

4. **Self-updates:**
   - If the update script itself changed, it updates and re-runs

5. **Shows available changes:**
   - Lists commits that will be merged
   - Shows version difference

6. **Offers merge strategies:**
   - **Merge** (recommended): Creates merge commit, preserves history
   - **Rebase**: Replays your commits on top (cleaner but rewrites history)
   - **Preview**: Shows changes without applying

7. **Handles conflicts:**
   - Auto-removes template-only files (create-app.*, etc.)
   - Provides conflict resolution guidance
   - Lists files with remaining conflicts

8. **Post-merge tasks:**
   - Checks for new schema models
   - Auto-adds missing models (e.g., AppSettings)
   - Provides next steps

### Configuration

Edit the script to configure template source:

```bash
# update-template.sh / update-template.ps1

# Relative path (template is sibling folder)
TEMPLATE_REPO="../unique-react-fullstack-starter"

# Or absolute path
TEMPLATE_REPO="/path/to/unique-react-fullstack-starter"

# Or SSH URL
TEMPLATE_REPO="git@github.com:ui-git-kim/unique-react-fullstack-starter.git"

# Or HTTPS URL
TEMPLATE_REPO="https://github.com/ui-git-kim/unique-react-fullstack-starter.git"
```

### First-Time Merge

If your app has unrelated git history (common when cloned without preserved history), the script handles this:

1. Detects unrelated histories
2. Uses `--allow-unrelated-histories` flag
3. Provides guidance on resolving conflicts
4. Auto-removes template-only files

### Conflict Resolution

When conflicts occur:

1. Open conflicting files in your editor
2. Look for conflict markers:
   ```
   <<<<<<< HEAD
   Your changes
   =======
   Template changes
   >>>>>>> template-upstream/main
   ```
3. Choose which changes to keep (or combine them)
4. Stage resolved files: `git add <file>`
5. Complete the merge: `git commit`

Or abort: `git merge --abort`

### Files Auto-Removed

These template-only files are automatically removed during merge:

- `create-app.ps1`
- `create-app.sh`
- `create-app.bat`
- `docs/MODULE_STARTER_TEMPLATE.md`
- `docs/TEMPLATE_UPDATE_SYSTEM.md`

<Aside type="note">
  The template's `docs/` folder is a git submodule pointing to the shared module system documentation. Apps should either remove this submodule or replace it with their own documentation. See [App Documentation](/starter-template/roadmap/#app-documentation) in the roadmap for planned improvements.
</Aside>

### Schema Updates

The script automatically adds new models from the template:

```bash
# If AppSettings model is added to template but missing from your schema:
[INFO] Adding AppSettings model to schema...
[OK] Added AppSettings model

# You'll need to run the migration:
cd backend && npx prisma migrate dev --name add_template_models
```

---

## Version Tracking

### Template Version

The template uses a `VERSION` file:

```
1.2.0
```

To bump the template version:

```bash
./scripts/bump-version.sh patch --commit  # 1.2.0 -> 1.2.1
./scripts/bump-version.sh minor --commit  # 1.2.0 -> 1.3.0
./scripts/bump-version.sh major --commit  # 1.2.0 -> 2.0.0
```

### App Version

Apps use `package.json` version:

```bash
npm run release:patch  # 1.0.0 -> 1.0.1
npm run release:minor  # 1.0.0 -> 1.1.0
npm run release:major  # 1.0.0 -> 2.0.0
```

---

## Troubleshooting

### "Template path not found"

Edit the script and update `TEMPLATE_REPO` to point to your template location.

### "You have uncommitted changes"

Commit or stash your changes before updating:

```bash
git stash
./update-template.sh
git stash pop
```

### "Merge conflicts"

1. View conflicts: `git status`
2. Open each conflicting file
3. Resolve conflicts manually
4. Stage and commit

### "Cannot merge unrelated histories"

The script handles this automatically. If running git manually:

```bash
git merge template-upstream/main --allow-unrelated-histories
```

### Push after rebase fails

After rebasing, you need force push:

```bash
git push --force-with-lease
```

---

## Script Structure

Both scripts follow the same structure and can be customized.

### File Locations

<FileTree>
- create-app.ps1 (Windows PowerShell)
- create-app.sh (macOS/Linux Bash)
- create-app.bat (Windows batch wrapper)
- update-template.ps1 (Windows PowerShell)
- update-template.sh (macOS/Linux Bash)
- scripts/
  - bump-version.sh (Version bumping)
  - bump-version.ps1 (Version bumping)
</FileTree>

### Customizing Scripts

Both `.ps1` and `.sh` versions have identical functionality. Edit either based on your platform.

**Configuration variables** are at the top of each script:

```bash
# update-template.sh
TEMPLATE_REPO="../unique-react-fullstack-starter"  # Template location
TEMPLATE_REMOTE="template-upstream"                 # Git remote name
TEMPLATE_BRANCH="main"                              # Branch to pull from
```

```powershell
# update-template.ps1
$TEMPLATE_REPO = "../unique-react-fullstack-starter"
$TEMPLATE_REMOTE = "template-upstream"
$TEMPLATE_BRANCH = "main"
```

### Adding Custom Steps

To add steps to the create script, find the appropriate section:

```bash
# create-app.sh

# After cloning, before npm install:
# Add your custom setup here
echo "Running custom setup..."

# After npm install, before env setup:
# Add your custom steps here
```

### Modifying Template-Only Files List

To change which files are auto-removed during updates:

```bash
# update-template.sh (line ~434)
for file in create-app.ps1 create-app.sh create-app.bat docs/MODULE_STARTER_TEMPLATE.md docs/TEMPLATE_UPDATE_SYSTEM.md; do
```

```powershell
# update-template.ps1 (line ~418)
$filesToRemove = @(
    "create-app.ps1",
    "create-app.sh",
    "create-app.bat",
    "docs/MODULE_STARTER_TEMPLATE.md",
    "docs/TEMPLATE_UPDATE_SYSTEM.md"
)
```

---

## Next Steps

- [Create Script Walkthrough](/starter-template/create-script/) - Step-by-step prompts guide
- [Updating from Template](/starter-template/updating/) - How updates work
- [Configuration](/starter-template/configuration/) - Environment variables
