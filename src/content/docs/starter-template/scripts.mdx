---
title: CLI Scripts
description: Create apps, update from template, and customize scripts
---

import { Aside, FileTree, Tabs, TabItem } from '@astrojs/starlight/components';

The starter template includes shell scripts for creating new apps and keeping them updated with template changes. Both PowerShell (`.ps1`) and Bash (`.sh`) versions are provided.

<Aside type="tip">
  For a step-by-step walkthrough of the create script prompts, see [Create Script Walkthrough](/starter-template/create-script/).
</Aside>

---

## create-app

Creates a new app from the template, preserving git history for future updates.

### Usage

<Tabs>
  <TabItem label="Windows">
    ```powershell
    # Run the PowerShell script directly
    .\create-app.ps1

    # Or use the batch wrapper (if execution policy blocks .ps1)
    .\create-app.bat
    ```

    <Aside type="note">
      The `.bat` file is a wrapper that runs the `.ps1` script. Use it if PowerShell execution policy prevents running `.ps1` files directly.
    </Aside>
  </TabItem>
  <TabItem label="macOS/Linux">
    ```bash
    ./create-app.sh
    ```
  </TabItem>
</Tabs>

### What It Does

1. **Prompts for configuration:**
   - App name
   - Output directory
   - Neon database credentials (paste from Neon dashboard)
   - Neon Auth URL
   - Backend port

2. **Clones the template:**
   - Preserves full git history (enables updates)
   - Removes `origin` remote (local-only by default)
   - Removes template-only files and docs submodule

3. **Installs dependencies:**
   - Root dependencies (concurrently)
   - Frontend dependencies (React, Vite, Tailwind, etc.)
   - Backend dependencies (Express, Prisma, etc.)

4. **Initialises shadcn/ui:**
   - Runs `shadcn init`
   - Adds required components (sidebar, dropdown-menu, etc.)

5. **Configures environment:**
   - Creates `.env` files for frontend and backend
   - Sets database adapter to `neon`

6. **Sets up database:**
   - Runs `prisma generate`
   - Runs `prisma migrate dev --name init`

7. **Creates initial commit:**
   - Commits all files with "Initialize [app] from template"

8. **Optional: configures app remote:**
   - Prompts for your app's git repository URL

### Database Configuration

The template uses **Neon PostgreSQL**. During setup, paste the connection snippet from your Neon dashboard:

```
DATABASE_URL="postgresql://user:pass@ep-xxx-pooler.../neondb?..."
# DATABASE_URL_UNPOOLED="postgresql://user:pass@ep-xxx.../neondb?..."
```

The script parses both URLs automatically:

| Variable | Description |
|----------|-------------|
| `DATABASE_URL` | Pooled connection (has `-pooler` in hostname) |
| `DIRECT_DATABASE_URL` | Direct connection for migrations |

### Output Structure

After running, you'll have:

```
my-app/
├── frontend/
│   ├── .env              # Frontend environment
│   └── ...
├── backend/
│   ├── .env              # Backend environment
│   └── ...
├── .git/                 # Preserves template history
└── ...
```

---

## update-template

Merges updates from the upstream template into your app.

### Usage

<Tabs>
  <TabItem label="Windows">
    ```powershell
    # Interactive mode
    .\update-template.ps1

    # Preview changes only
    .\update-template.ps1 -Preview

    # Merge directly
    .\update-template.ps1 -Merge
    ```
  </TabItem>
  <TabItem label="macOS/Linux">
    ```bash
    # Interactive mode
    ./update-template.sh

    # Preview changes only
    ./update-template.sh --preview

    # Merge directly
    ./update-template.sh --merge
    ```
  </TabItem>
</Tabs>

Or use npm scripts:

```bash
npm run template:check   # Preview changes
npm run template:update  # Merge changes
```

### What It Does

1. **Checks prerequisites:**
   - Git installed
   - In a git repository
   - Working directory is clean

2. **Sets up template remote:**
   - Adds `template-upstream` remote (if not exists)
   - Configures as pull-only (push disabled)

3. **Fetches updates:**
   - Fetches from `template-upstream/main`

4. **Self-updates:**
   - If the update script itself changed, it updates and re-runs

5. **Shows available changes:**
   - Lists commits that will be merged
   - Shows version difference

6. **Offers options:**
   - **Merge** (recommended): Creates merge commit, preserves history
   - **Preview**: Shows changes without applying

7. **Handles conflicts:**
   - Auto-removes template-only files (create-app.*, etc.)
   - Provides conflict resolution guidance
   - Lists files with remaining conflicts

8. **Post-merge tasks:**
   - Checks for new schema models
   - Auto-adds missing models (e.g., AppSettings)
   - Provides next steps

### Configuration

Edit the script to configure template source:

<Tabs>
  <TabItem label="Bash">
    ```bash
    # update-template.sh

    # Relative path (template is sibling folder)
    TEMPLATE_REPO="../unique-react-fullstack-starter"

    # Or absolute path
    TEMPLATE_REPO="/path/to/unique-react-fullstack-starter"

    # Or SSH URL
    TEMPLATE_REPO="git@github.com:ui-git-kim/unique-react-fullstack-starter.git"

    # Or HTTPS URL
    TEMPLATE_REPO="https://github.com/ui-git-kim/unique-react-fullstack-starter.git"
    ```
  </TabItem>
  <TabItem label="PowerShell">
    ```powershell
    # update-template.ps1

    # Relative path (template is sibling folder)
    $TEMPLATE_REPO = "../unique-react-fullstack-starter"

    # Or absolute path
    $TEMPLATE_REPO = "C:/Projects/unique-react-fullstack-starter"

    # Or SSH URL
    $TEMPLATE_REPO = "git@github.com:ui-git-kim/unique-react-fullstack-starter.git"

    # Or HTTPS URL
    $TEMPLATE_REPO = "https://github.com/ui-git-kim/unique-react-fullstack-starter.git"
    ```
  </TabItem>
</Tabs>

### First-Time Merge

If your app has unrelated git history (common when cloned without preserved history), the script handles this:

1. Detects unrelated histories
2. Uses `--allow-unrelated-histories` flag
3. Provides guidance on resolving conflicts
4. Auto-removes template-only files

### Conflict Resolution

When conflicts occur:

1. Open conflicting files in your editor
2. Look for conflict markers:
   ```
   <<<<<<< HEAD
   Your changes
   =======
   Template changes
   >>>>>>> template-upstream/main
   ```
3. Choose which changes to keep (or combine them)
4. Stage resolved files: `git add <file>`
5. Complete the merge: `git commit`

Or abort: `git merge --abort`

### Files Auto-Removed

These template-only files are automatically removed during merge:

- `create-app.ps1`
- `create-app.sh`
- `create-app.bat`

### Schema Updates

The script automatically adds new models from the template:

```bash
# If AppSettings model is added to template but missing from your schema:
[INFO] Adding AppSettings model to schema...
[OK] Added AppSettings model

# You'll need to run the migration:
cd backend && npx prisma migrate dev --name add_template_models
```

---

## Version Tracking

<Aside type="caution">
  **Version tracking is critical for the update system.** The template's `VERSION` file enables the update script to show what version you're updating from/to. Always bump the version when making infrastructure changes.
</Aside>

### Template Version

The template uses a `VERSION` file at the root:

```
1.13.0
```

The update script displays version information:

```
[INFO] Current template version: 1.12.0
[INFO] Template version available: 1.13.0
```

### Bumping Template Version

<Tabs>
  <TabItem label="npm Scripts">
    ```bash
    npm run template:version:patch  # 1.2.0 -> 1.2.1
    npm run template:version:minor  # 1.2.0 -> 1.3.0
    npm run template:version:major  # 1.2.0 -> 2.0.0
    ```
  </TabItem>
  <TabItem label="Direct">
    ```bash
    ./scripts/bump-version.sh patch --commit
    ./scripts/bump-version.sh minor --commit
    ./scripts/bump-version.sh major --commit
    ```
  </TabItem>
</Tabs>

### When to Bump

| Change Type | Bump | Changelog |
|-------------|------|-----------|
| Bug fixes in `config/`, `lib/`, `middleware/` | Patch | No |
| New features, new registries, new utilities | Minor | Yes |
| Breaking changes to registries or APIs | Major | Yes |

### App Version

Apps use `package.json` version (separate from template version):

```bash
npm run release:patch  # 1.0.0 -> 1.0.1
npm run release:minor  # 1.0.0 -> 1.1.0
npm run release:major  # 1.0.0 -> 2.0.0
```

---

## Troubleshooting

### "Template path not found"

Edit the script and update `TEMPLATE_REPO` to point to your template location.

### "You have uncommitted changes"

Commit or stash your changes before updating:

```bash
git stash
./update-template.sh
git stash pop
```

### "Merge conflicts"

1. View conflicts: `git status`
2. Open each conflicting file
3. Resolve conflicts manually
4. Stage and commit

### "Cannot merge unrelated histories"

The script handles this automatically. If running git manually:

```bash
git merge template-upstream/main --allow-unrelated-histories
```

### PowerShell Execution Policy

If `.ps1` files won't run, use the `.bat` wrapper:

```powershell
.\create-app.bat
```

Or temporarily allow scripts:

```powershell
Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope Process
.\create-app.ps1
```

---

## Script Structure

Both scripts follow the same structure and can be customized.

### File Locations

<FileTree>
- create-app.ps1 (Windows PowerShell)
- create-app.sh (macOS/Linux Bash)
- create-app.bat (Windows batch wrapper for .ps1)
- update-template.ps1 (Windows PowerShell)
- update-template.sh (macOS/Linux Bash)
- scripts/
  - bump-version.sh (Version bumping)
  - bump-version.ps1 (Version bumping)
</FileTree>

### Customizing Scripts

Both `.ps1` and `.sh` versions have identical functionality. Edit either based on your platform.

**Configuration variables** are at the top of each script:

<Tabs>
  <TabItem label="Bash">
    ```bash
    # update-template.sh
    TEMPLATE_REPO="../unique-react-fullstack-starter"
    TEMPLATE_REMOTE="template-upstream"
    TEMPLATE_BRANCH="main"
    ```
  </TabItem>
  <TabItem label="PowerShell">
    ```powershell
    # update-template.ps1
    $TEMPLATE_REPO = "../unique-react-fullstack-starter"
    $TEMPLATE_REMOTE = "template-upstream"
    $TEMPLATE_BRANCH = "main"
    ```
  </TabItem>
</Tabs>

### Modifying Template-Only Files List

To change which files are auto-removed during updates:

<Tabs>
  <TabItem label="Bash">
    ```bash
    # update-template.sh
    for file in create-app.ps1 create-app.sh create-app.bat; do
    ```
  </TabItem>
  <TabItem label="PowerShell">
    ```powershell
    # update-template.ps1
    $filesToRemove = @(
        "create-app.ps1",
        "create-app.sh",
        "create-app.bat"
    )
    ```
  </TabItem>
</Tabs>

---

## Next Steps

- [Create Script Walkthrough](/starter-template/create-script/) - Step-by-step prompts guide
- [Updating from Template](/starter-template/updating/) - How updates work
- [Configuration](/starter-template/configuration/) - Environment variables
