---
title: Changelog
description: Version history and release notes for the starter template
---

import { Aside, Badge } from '@astrojs/starlight/components';

This page documents notable changes to the starter template. The template uses semantic versioning: **major.minor.patch**.

- **Major** (1.0.0 → 2.0.0): Breaking changes requiring migration
- **Minor** (1.0.0 → 1.1.0): New features, backwards compatible
- **Patch** (1.0.0 → 1.0.1): Bug fixes, documentation updates

<Aside type="tip">
Check your current version in the `VERSION` file at the project root.
</Aside>

---

## v1.16.0

**Personal Info Fields Registry: Module Preferences Now Save Correctly**

Fixed a critical issue where module-registered personal info fields with `storage: 'preferences'` (the default) were rejected by the backend Zod validation and failed silently in the UI.

**Root Cause (3 compounding issues):**

1. **Backend Zod schema used `.strict()`** — The `UpdatePreferencesSchema` rejected any field not explicitly listed, returning a 400 error for module-registered preference keys (e.g. `handle`, `socialTwitter`). Changed to `.passthrough()` so module-registered fields pass through validation.

2. **`handleFieldChange` swallowed errors** — When the API returned an error, the `onChange` callback caught and logged the error but did not re-throw. Custom field components (like the Blocks Builder's `HandleField`) that called `await onChange(value)` never saw the failure, showing "Saved" when the save actually failed.

3. **Text/textarea fields fired API calls on every keystroke** — No debounce, causing rapid-fire `PATCH` requests with potential race conditions.

**Fixes:**

- Backend `UpdatePreferencesSchema` now uses `.passthrough()` instead of `.strict()`
- Backend `UserPreferences` and `UpdatePreferencesInput` types now include `[key: string]: unknown` index signatures, matching the frontend types and the Zod `.passthrough()` behaviour
- `handleFieldChange` now re-throws errors after reverting, so custom components can catch failures and display their own error UI (e.g. toast notifications)
- `PersonalInfoFieldProps.onChange` type changed from `(value: unknown) => void` to `(value: unknown) => Promise<void>` to reflect async save behaviour
- Text and textarea registry fields now use debounced saves (600ms delay) instead of firing API calls on every keystroke
- Built-in field types (text, textarea, select) gracefully handle re-thrown errors

**Files Modified:**
- `backend/src/features/user/user.types.ts` — Zod schema + type index signatures
- `frontend/src/config/personal-info-fields.registry.ts` — `onChange` type signature
- `frontend/src/features/user/pages/PersonalInformationPage.tsx` — Error re-throw + debounced text fields

**Impact on modules:**
- Modules registering `personalInfoFieldsRegistry` fields with `storage: 'preferences'` now work correctly out of the box
- Custom field components should `await onChange(value)` and handle errors (already the expected pattern)
- No breaking changes — existing module code that calls `onChange()` without `await` continues to work

---

## v1.15.7

**Unified Settings & Page Block Libraries**

Extracted shared components from `SettingsComponents.tsx` and `AdminComponents.tsx` into two reusable component libraries, eliminating duplication between user settings and admin pages. All `Settings`/`Admin` prefixes dropped — these are generic building blocks for any module.

**New: `@/components/page-blocks/`**
- `PageHeader` — Page title, description, optional icon/badge (was `AdminPageHeader`)
- `LoadingState` — Centered loading spinner (was `AdminLoadingState`)
- `ErrorAlert` — Error alert, renders null when no error (was `AdminErrorAlert`)
- `EmptyState` — Centered empty state with icon/title/action (was `AdminEmptyState`)

**New: `@/components/settings-blocks/`**
- **Layout rows:** `Row` (2-column), `Row3Col` (3-column: label | middle | action), `RowStacked` (content below label)
- **Utilities:** `Divider`, `Note` (merged `SettingsNote` + `AdminInfoNote`), `SectionHeader`, `TabBar`
- **Form controls:** `Dropdown`, `ToggleGroup`, `ToggleSwitch` (accessible toggle button)
- **Specialised:** `DangerBox` (merged both danger components), `DisabledRow`, `PlanCard`, `ProviderCard`, `ProviderGroup`, `Table`
- **Types:** `DropdownOption`, `ToggleItem`, `TableColumn<T>`, `TableAction<T>`

**Design change — composition over combination:**
- No more `ToggleRow` / `DropdownRow` / `InputRow` — use `<Row action={<ToggleSwitch />} />`, `<Row action={<Dropdown />} />`, etc.
- `Row3Col` replaces `RowWithDropdown` — generic 3-column layout for any middle + action content

**Removed from AdminComponents.tsx:** `AdminPageHeader`, `AdminLoadingState`, `AdminErrorAlert`, `AdminEmptyState`, `AdminInfoNote`, `AdminInputRow`, `AdminTextareaRow`, `AdminToggleRow`, `AdminDropdownRow`, `AdminColorInput`, `AdminSectionHeader`, `AdminTabBar`, `AdminDivider`, `AdminDangerAction`

**Deleted:** `SettingsComponents.tsx` — fully replaced by `@/components/settings-blocks`

**Files Added (23):**
- `frontend/src/components/page-blocks/` — 5 files (4 components + barrel index)
- `frontend/src/components/settings-blocks/` — 18 files (15 components + types + helpers + barrel index)

**Files Modified (11):**
- 5 user settings pages — updated imports from `SettingsComponents` → `@/components/settings-blocks`
- 4 admin pages — updated imports to `@/components/page-blocks` + `@/components/settings-blocks` + admin-specific only
- `AdminComponents.tsx` — trimmed to admin-specific components only (master-detail, sortable, sheet)
- `features/admin/index.ts` — removed deleted component exports

---

## v1.15.1

**Update Script: Auto-install Dependencies**

- Update scripts (`update-template.sh`, `update-template.ps1`) now automatically run `npm run install:all` after merging, so new dependencies (like `@tanstack/react-table`, `@dnd-kit/*`) are installed automatically
- Update scripts now detect and install missing shadcn components post-merge
- `install:all` script in `package.json` updated to include `@dnd-kit/core`, `@dnd-kit/sortable`, `@dnd-kit/utilities`, and `@tanstack/react-table`

---

## v1.15.0

**Reusable Admin Components & Header Toolbar Enhancement**

Added a comprehensive admin component library (analogous to SettingsComponents) plus enhanced the header toolbar to support labelled buttons and search inputs. Admin pages can now dynamically inject action buttons (Save, Delete, etc.) into the site header via a new `useAdminToolbarActions` hook.

**New Components (AdminComponents.tsx):**
- **Page-level:** `AdminPageHeader`, `AdminLoadingState`, `AdminErrorAlert`, `AdminEmptyState`, `AdminInfoNote`
- **Master-detail layout:** `AdminMasterDetail`, `AdminListPanel`, `AdminDetailPanel`, `AdminDetailTabs`
- **Sortable lists (dnd-kit):** `AdminSortableList`, `AdminSortableItem`, `AdminSortableGroup` — supports nested/cross-group dragging
- **Form rows:** `AdminInputRow`, `AdminTextareaRow`, `AdminToggleRow`, `AdminDropdownRow`, `AdminColorInput`
- **Utilities:** `AdminSectionHeader`, `AdminDivider`, `AdminDangerAction`

**New Components (AdminDataTable.tsx):**
- `AdminDataTable` — Built on `@tanstack/react-table` with sorting, filtering, pagination, row selection, and expandable rows
- `AdminDataTableToolbar` — Search, column visibility, filters
- `AdminDataTablePagination` — Page navigation and page size selector
- `AdminColumnHeader` — Sortable column header

**Header Toolbar Enhancement:**
- New `type: 'button'` — Renders labelled buttons with text, variant, loading state (e.g., "Save Changes")
- New `type: 'search'` — Renders compact search input in the toolbar
- New `useAdminToolbarActions` hook — Dynamically register/unregister toolbar items on page mount/unmount

**Dependencies Added (create-app scripts):**
- `@tanstack/react-table` — Headless table library
- shadcn `table` + `checkbox` components

**Refactored Pages:**
- `NavigationManagementPage` — Now uses admin components and toolbar hook
- `HeaderToolbarPage` — Now uses admin components and toolbar hook

**Files Added:**
- `frontend/src/features/admin/components/AdminComponents.tsx`
- `frontend/src/features/admin/components/AdminDataTable.tsx`
- `frontend/src/features/admin/hooks/useAdminToolbarActions.ts`

**Files Modified:**
- `frontend/src/config/header-toolbar.registry.ts` — Added button/search types
- `frontend/src/features/dashboard/components/header/HeaderToolbarItem.tsx` — Added button/search rendering
- `frontend/src/features/admin/index.ts` — Added exports
- `frontend/src/features/admin/pages/NavigationManagementPage.tsx` — Refactored
- `frontend/src/features/admin/pages/HeaderToolbarPage.tsx` — Refactored
- `create-app.sh` / `create-app.ps1` — Added @tanstack/react-table, shadcn table/checkbox

---

## v1.14.8

**Dynamic Breadcrumb Support**

Added a new `BreadcrumbContext` that allows pages to set dynamic breadcrumbs that display in the site header.

**New Components:**
- `BreadcrumbProvider` - Wraps the app and manages breadcrumb state
- `useBreadcrumbs()` - Hook to set dynamic breadcrumbs from any component
- `useBreadcrumbsOptional()` - Safe hook that returns undefined if not in provider

**Features:**
- Dynamic breadcrumbs automatically override route-based breadcrumbs when set
- Breadcrumbs auto-clear on route change (no stale breadcrumbs)
- Supports clickable links via optional `path` property on breadcrumb items

**Usage:**
```tsx
import { useBreadcrumbs } from '@/components/layout';

function MyDetailPage() {
  const { setBreadcrumbs } = useBreadcrumbs();
  const { data } = useMyData();

  useEffect(() => {
    if (data) {
      setBreadcrumbs([
        { label: 'Items', path: '/items' },
        { label: data.name }
      ]);
    }
  }, [data, setBreadcrumbs]);
}
```

**Files Added:**
- `frontend/src/components/layout/BreadcrumbContext.tsx`

**Files Modified:**
- `frontend/src/components/layout/index.ts` - Added exports
- `frontend/src/features/dashboard/pages/DashboardPage.tsx` - Added provider
- `frontend/src/features/dashboard/components/header/SiteHeader.tsx` - Uses dynamic breadcrumbs

---

## v1.14.6

**Fix Undefined Array Errors in Admin Hooks**

Fixed "Cannot read properties of undefined (reading 'includes')" error in admin pages.

**Problem:**
- `useToolbarOverrides` and `useNavigationOverrides` hooks crashed when API returned empty/undefined arrays
- HeaderToolbarPage and NavigationManagementPage would show error screen

**Fix:**
- Added null-safe defaults when loading overrides from API
- Added optional chaining to `isHidden` and `isSectionHidden` callbacks
- Ensures `hidden`, `hiddenSections`, `orderOverrides`, and `sections` are always defined

---

## v1.14.5

**Admin Panel Global State Refresh**

Fixed sidebar and header not updating after saving changes in admin panel.

**Problem:**
- Saving navigation overrides or toolbar overrides in admin panel updated the database
- But the sidebar/header didn't reflect changes until page reload
- Global AppSettingsContext wasn't being refreshed after admin saves

**Fix:**
- `NavigationManagementPage` now calls `refetchGlobalSettings()` after save
- `HeaderToolbarPage` now calls `refetchGlobalSettings()` after save
- Sidebar and header immediately reflect saved changes

---

## v1.14.4

**Admin Routes Registration Fix**

Fixed a bug where admin routes (PATCH, navigation, toolbar, users) were not being mounted due to duplicate path detection in the route registry.

**Problem:**
- Admin feature registered two routers on `/admin`: one for public GET (settings) and one for admin-only operations
- Route registry's duplicate detection skipped the second registration
- Result: Only `GET /api/v1/admin/settings` worked; all write operations returned 404

**Fix:**
- Merged both routers into a single router
- Applied `requireAdmin` middleware per-route instead of per-router
- `GET /settings` remains accessible to all authenticated users (for sidebar branding)
- All other admin routes properly require admin role

**Affected endpoints now working:**
- `PATCH /api/v1/admin/settings`
- `GET/PATCH /api/v1/admin/navigation`
- `GET/PATCH /api/v1/admin/toolbar`
- `GET /api/v1/admin/users`
- `PATCH /api/v1/admin/users/:userId/role`
- `DELETE /api/v1/admin/users/:userId`

---

## v1.14.1

**Bug Fixes and Documentation Improvements**

**Fixes:**
- Added missing `usePersonalInfoFields` export alias in `registry.hooks.ts`
- Added `external?: boolean` property to `NavigationItem` for external links that open in new tab
- Updated `NavMain` and `NavSecondary` components to render external links with `target="_blank"`

**Documentation:**
- Fixed incorrect `activeIcon` property in header toolbar docs (use `custom` type for icon switching)
- Fixed service registry docs to show correct import paths and documented `registerDynamic()`
- Fixed SidebarSections documentation to align with navigation registry implementation
- Added managed role explanation to auth and admin feature docs
- Added "Settings vs Preferences" terminology section to user feature docs
- Enhanced DashboardGrid documentation with props, constants, and utilities
- Added Known Issues section to roadmap (order convention inconsistency)
- Documented missing registry methods for filter, navigation, and dashboard registries

---

## v1.14.0

**Script Improvements and Docs Submodule Handling**

Improvements to create-app and update-template scripts for cleaner app setup.

**Create Script:**
- Now removes the `docs/` submodule during app creation (apps don't need the shared module system docs)
- Simplified database setup to Neon-only (removed standard PostgreSQL option)

**Update Script:**
- Removed rebase option (merge is the recommended upstream strategy)
- Removed references to old documentation files (MODULE_STARTER_TEMPLATE.md, etc.)
- Simplified interactive menu to merge/preview options

**Documentation:**
- Added Windows/macOS tabs throughout CLI Scripts page
- Documented `.bat` wrapper for PowerShell execution policy issues
- Enhanced Version Tracking section with emphasis on importance for update system

---

## v1.13.0

**Unified Navigation Overrides**

Merged `sectionOverrides` into `navigationOverrides` for a simpler, unified API.

**Changes:**
- Removed `sectionOverrides` field from database schema
- Removed `GET/PATCH /api/v1/admin/section-overrides` endpoint
- Section overrides now live inside `navigationOverrides.sections` and `navigationOverrides.hiddenSections`

**Updated NavigationOverrides structure:**
```typescript
{
  hidden: string[];                        // Hidden nav item IDs
  orderOverrides: Record<string, number>;  // Item order overrides
  sections: Record<string, SectionOverride>; // Section customisation
  hiddenSections: string[];                // Hidden section IDs
}
```

**Frontend:**
- Removed `useSectionOverridesAdmin` hook (use `useNavigationOverrides` instead)
- Removed `useGlobalSectionOverrides` hook (use `useGlobalNavigationOverrides().sections`)
- Updated `NavMain` to receive `navigationOverrides` prop instead of separate `sectionOverrides`

**Admin Panel:**
- Navigation Management page restructured with tabs: Main Navigation, Secondary, User Menu
- Sections integrated into Main Navigation tab (as collapsible containers)
- Removed separate Sections tab

---

## v1.12.0

**Registry-Based Sidebar Sections**

Major refactor of how sidebar sections work. Sections are now defined in the **navigation registry** by modules, with admin overrides for customisation.

**Navigation Registry:**
- Added `sidebarSection` property to navigation items (defaults to `'main'`)
- Added `registerSection()` method for explicit section registration
- Added `useRegistrySections()` and `useMainNavigationGrouped()` hooks
- Sections auto-create when referenced by items
- New 0-100 order convention for items and sections

**Admin Panel:**
- Navigation Management page now includes "Sections" tab
- Admins can customise section labels, toggle label visibility, reorder, and hide sections
- Admins cannot create/delete sections (module responsibility)
- Removed separate Sidebar Sections page (merged into Navigation)

**Backend:**
- Renamed `sidebarSections` to `sectionOverrides` in schema
- New endpoint: `GET/PATCH /api/v1/admin/section-overrides`
- Section overrides store only customisations, not full section definitions

**Architecture:**
- Registry (in-memory) + Admin Overrides (database) merged at render time
- Clean module install/uninstall - overrides persist harmlessly

---

## v1.11.0

**Sidebar Sections Admin** *(superseded by v1.12.0)*

- Added admin page for managing sidebar sections
- Create, edit, delete, and reorder sections via drag-and-drop
- Assign navigation items to sections
- Toggle section label visibility
- "main" section cannot be deleted and serves as default
- Items assigned to non-existent sections fall back to "main"

---

## v1.10.0

**Toolbar Overrides Admin**

- Added admin page for managing header toolbar items
- Hide/show toolbar items from admin panel
- Toolbar overrides stored in AppSettings

---

## v1.9.0

**Drag-and-Drop Navigation Management**

- Added `@dnd-kit` packages for drag-and-drop functionality
- Replaced up/down buttons with proper drag-and-drop in admin navigation page
- Removed "Order: X" badges from admin UI (order numbers are developer-only)
- Improved UX with visual feedback during drag operations

---

## v1.8.0

**Registry System Enhancements**

- Added `filterRegistry` for data transformation at hook points (frontend and backend)
- Added `actionRegistry` for side effects at hook points (frontend and backend)
- Both registries support sync and async operations with ordering
- Added hook naming conventions for consistent usage across modules

---

## v1.7.0

**Header Toolbar Registry**

- Added `headerToolbarRegistry` for extending the site header
- Supports action buttons, toggles, dropdowns, and custom components
- Left and right positioning with order-based sorting
- Badge support for notification counts

---

## v1.6.0

**Admin Feature Improvements**

- Added app branding settings (logo, colours, name)
- Added navigation overrides (reorder, hide, rename menu items)
- Admin pages registry for modular admin panel extensions
- Role-based middleware (`requireAdmin`, `requireRole`)

---

## v1.5.0

**Settings Pages Registry**

- Added `settingsPagesRegistry` for modular settings pages
- Features can now add their own settings sections
- Dynamic routing for settings pages
- Consistent settings layout wrapper

---

## v1.4.0

**Dashboard Widget System**

- Added `dashboardRegistry` for dashboard widgets
- Grid-based layout with size options (1x1, 2x1, 2x2, etc.)
- Priority-based ordering
- Skeleton loading states

---

## v1.3.0

**User Feature Enhancements**

- Added `UserAvatar` component with priority-based display
- Avatar priority: custom upload → chosen colour → OAuth image
- Preferences registry for user settings
- Notification preferences registry

---

## v1.2.0

**Backend Service Registry**

- Added `serviceRegistry` for cross-feature communication
- Type-safe service access with TypeScript augmentation
- Eliminates circular imports between features

---

## v1.1.0

**Route Registry with Versioning**

- Added `routeRegistry` for backend API routes
- API versioning support (v1, v2, etc.)
- Deprecation headers for old versions
- Auth middleware integration

---

## v1.0.0

**Initial Release**

- Feature-based architecture (frontend and backend)
- Navigation registry with role-based visibility
- Neon Auth integration (JWT + email OTP)
- User profiles and settings
- Base dashboard layout
- Prisma 7 with Neon PostgreSQL
- Template update system via git remotes

---

## Versioning Infrastructure

Version bumps happen automatically for infrastructure changes. See [LLM Rules](/getting-started/llm-rules/) for the complete policy.

**Files requiring version bump:**
- `frontend/src/config/*.ts` - Registry files
- `frontend/src/lib/*.ts` - Utility libraries
- `backend/src/config/*.ts` - Registry files
- `backend/src/lib/*.ts` - Utility libraries
- `backend/src/middleware/*.ts` - Middleware
- `scripts/*.ps1`, `scripts/*.sh` - CLI scripts

**Bump commands:**
```bash
# Patch (bug fixes)
npm run template:version:patch

# Minor (new features)
npm run template:version:minor

# Major (breaking changes)
npm run template:version:major
```
