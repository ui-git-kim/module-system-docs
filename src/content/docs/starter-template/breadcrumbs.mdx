---
title: Dynamic Breadcrumbs
description: How the breadcrumb system works and how modules set page-level breadcrumbs
---

import { Aside } from '@astrojs/starlight/components';

The site header displays breadcrumbs to help users understand their location in the app. The breadcrumb system supports both automatic breadcrumbs (from registries) and dynamic breadcrumbs (set by individual pages).

---

## How It Works

Breadcrumbs are managed by the `BreadcrumbProvider` which wraps the app layout. Pages can set custom breadcrumbs using the `useBreadcrumbs` hook — these override any route-based breadcrumbs.

Breadcrumbs automatically clear on route change, so you never see stale breadcrumbs from a previous page.

---

## Automatic Breadcrumbs

Settings and admin pages get breadcrumbs automatically from their registries:

| Page | Breadcrumb |
|------|------------|
| `/settings/personal-info` | User Settings > Personal Information |
| `/settings/billing` | User Settings > Billing |
| `/admin/app-structure` | Admin > App Structure |
| `/admin/users` | Admin > User Management |

These are set by `DynamicSettingsPage` and `DynamicAdminPage`, which read the page title from the settings pages and admin pages registries respectively.

---

## Setting Dynamic Breadcrumbs

For pages that need custom breadcrumbs (detail pages, nested views), use the `useBreadcrumbs` hook:

```tsx
import { useBreadcrumbs } from '@/components/layout';

function ProjectDetailPage() {
  const { setBreadcrumbs } = useBreadcrumbs();
  const { data: project } = useProjectData();

  useEffect(() => {
    if (project) {
      setBreadcrumbs([
        { label: 'Projects', path: '/projects' },
        { label: project.name },  // No path = current page (not clickable)
      ]);
    }
  }, [project, setBreadcrumbs]);

  return <div>{/* Page content */}</div>;
}
```

### Breadcrumb Item Shape

```typescript
interface BreadcrumbItem {
  label: string;      // Display text
  path?: string;      // Optional — makes the breadcrumb a clickable link
}
```

- Items **with** a `path` render as clickable links
- The **last item** (current page) should typically omit `path`
- Breadcrumbs clear automatically on navigation, so you don't need to clean up

---

## Available Hooks

| Hook | Description |
|------|-------------|
| `useBreadcrumbs()` | Returns `{ setBreadcrumbs }` — call to set page breadcrumbs |
| `useBreadcrumbsOptional()` | Safe version — returns `undefined` if not inside a `BreadcrumbProvider` |

<Aside type="tip">
Use `useBreadcrumbsOptional()` in components that might be rendered outside the main layout (e.g., in modals or standalone pages).
</Aside>

---

## Module Integration

Modules that add their own routes should set breadcrumbs on their pages:

```tsx
// modules/billing/pages/InvoiceDetailPage.tsx
import { useBreadcrumbs } from '@/components/layout';

function InvoiceDetailPage() {
  const { setBreadcrumbs } = useBreadcrumbs();
  const { data: invoice } = useInvoice(invoiceId);

  useEffect(() => {
    if (invoice) {
      setBreadcrumbs([
        { label: 'Billing', path: '/billing' },
        { label: 'Invoices', path: '/billing/invoices' },
        { label: `Invoice #${invoice.number}` },
      ]);
    }
  }, [invoice, setBreadcrumbs]);

  return <div>{/* Invoice details */}</div>;
}
```

For settings and admin pages registered via the registries, breadcrumbs are set automatically — you don't need to use the hook.

---

## Next Steps

- [Shell Layout](/starter-template/shell-layout/) — The overall app layout structure
- [Navigation](/starter-template/registries/#navigation-registry) — Sidebar navigation
