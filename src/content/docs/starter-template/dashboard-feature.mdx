---
title: Dashboard Feature
description: Dashboard layout, widgets, and the registry system
tableOfContents:
  maxHeadingLevel: 2
---

import { Aside, Steps, Tabs, TabItem } from '@astrojs/starlight/components';

The dashboard feature provides the main application layout including sidebar navigation, header toolbar, and an extensible widget system.

---

## Overview

The dashboard is the core layout structure:

```
┌─────────────────────────────────────────────────────────┐
│  ┌──────────┐  ┌────────────────────────────────────┐  │
│  │          │  │ Header (Breadcrumbs + Toolbar)     │  │
│  │          │  ├────────────────────────────────────┤  │
│  │ Sidebar  │  │                                    │  │
│  │          │  │  Content Area                      │  │
│  │ (Nav)    │  │  (Widgets / Page Content)          │  │
│  │          │  │                                    │  │
│  │          │  │                                    │  │
│  └──────────┘  └────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

---

## File Structure

```
frontend/src/features/dashboard/
├── index.ts                        # Public exports
├── routes.config.tsx               # Dashboard routes
├── navigation.registration.ts      # Registers "Dashboard" in sidebar
├── header-toolbar.registration.ts  # Registers theme toggle
├── dashboard.widgets.ts            # Registers core widgets
├── pages/
│   └── DashboardPage.tsx           # Main layout component
├── components/
│   ├── DashboardGrid.tsx           # Widget grid renderer
│   ├── header/
│   │   ├── SiteHeader.tsx          # Header with breadcrumbs
│   │   ├── HeaderToolbar.tsx       # Toolbar container
│   │   ├── HeaderToolbarItem.tsx   # Toolbar item renderer
│   │   └── ThemeToggle.tsx         # Light/dark toggle
│   ├── sidebar/
│   │   ├── AppSidebar.tsx          # Main sidebar
│   │   ├── NavMain.tsx             # Primary navigation
│   │   ├── NavSecondary.tsx        # Secondary navigation
│   │   └── NavUser.tsx             # User menu
│   └── widgets/
│       └── ExampleWidgets.tsx      # Example widget components
```

---

## Dashboard Layout

### DashboardPage Component

The main layout wraps all dashboard content:

```tsx
// Used in routes.tsx
{
  element: (
    <AuthProtectedRoute>
      <DashboardPage />
    </AuthProtectedRoute>
  ),
  children: [
    ...dashboardRoutes,
    ...userRoutes,
    ...adminRoutes,
  ],
}
```

### Providers Hierarchy

```tsx
function DashboardPage() {
  return (
    <AppSettingsProvider>      {/* App branding + overrides */}
      <UserProfileProvider>     {/* User profile + preferences */}
        <SidebarProvider>       {/* Sidebar state */}
          <AppSidebar />
          <SidebarInset>
            <SiteHeader />
            <main>
              <Outlet />        {/* Route content */}
            </main>
          </SidebarInset>
        </SidebarProvider>
      </UserProfileProvider>
    </AppSettingsProvider>
  );
}
```

---

## Navigation Registry

Features register navigation items that appear in the sidebar:

### Registering Navigation Items

```tsx
// features/my-feature/navigation.registration.ts
import { navigationRegistry } from '@/config/navigation.registry';
import { Folder } from 'lucide-react';

// Main sidebar item
navigationRegistry.registerMain({
  id: 'projects',
  title: 'Projects',
  url: '/projects',
  icon: Folder,
  order: 20,
});

// Secondary sidebar item (bottom)
navigationRegistry.registerSecondary({
  id: 'help',
  title: 'Help',
  url: '/help',
  icon: HelpCircle,
  order: 10,
});

// User menu item
navigationRegistry.registerUserMenu({
  id: 'profile',
  title: 'Profile',
  url: '/settings/personal-info',
  icon: User,
  order: 10,
});
```

### Navigation Item Properties

| Property | Type | Description |
|----------|------|-------------|
| `id` | string | Unique identifier |
| `title` | string | Display text |
| `url` | string | Route path |
| `icon` | LucideIcon | Icon component |
| `order` | number | Sort order (default: 100) |
| `badge` | string/number | Notification badge |
| `requiredRole` | UserRole | Role-based visibility |
| `items` | SubItem[] | Nested navigation |

### Order Convention

| Range | Purpose |
|-------|---------|
| 1-10 | Core items (Dashboard, Home) |
| 11-50 | Main features |
| 51-80 | Secondary features |
| 81-99 | Utility items |
| 100+ | Third-party/plugins |

### Role-Based Visibility

```tsx
navigationRegistry.registerSecondary({
  id: 'admin',
  title: 'Admin',
  url: '/admin',
  icon: Shield,
  order: 90,
  requiredRole: 'admin', // Only visible to admins
});
```

---

## Dashboard Widgets

### Widget Registry

Widgets are registered with the dashboard registry:

```tsx
// features/my-feature/dashboard.widgets.ts
import { dashboardRegistry } from '@/config/dashboard.registry';
import { MyWidget } from './components/widgets/MyWidget';

dashboardRegistry.register({
  id: 'my-widget',
  title: 'My Widget',
  description: 'Shows important stats',
  component: MyWidget,
  size: '2x1',        // Width x Height in grid units
  priority: 30,
  category: 'analytics',
  canHide: true,      // User can hide from preferences
  canResize: false,
});
```

### Widget Sizes

| Size | Description |
|------|-------------|
| `'1x1'` | Single grid cell |
| `'2x1'` | Double width |
| `'1x2'` | Double height |
| `'2x2'` | Large square |
| `'full'` | Full width |

### Creating Widget Components

```tsx
import type { DashboardWidgetProps } from '@/config/dashboard.registry';

export function MyWidget({ widget, isCompact }: DashboardWidgetProps) {
  // widget contains the registration config
  // isCompact is true when space is limited

  return (
    <div className="space-y-4">
      <h3>{widget.title}</h3>
      {isCompact ? (
        <CompactView />
      ) : (
        <FullView />
      )}
    </div>
  );
}
```

### User Widget Visibility

Users can hide widgets via preferences:

```tsx
// Stored in UserPreferences.dashboardWidgets
interface WidgetVisibility {
  id: string;
  visible: boolean;
  order?: number;
}
```

---

## Header Toolbar

### Toolbar Registry

Features can add items to the header:

```tsx
// features/my-feature/header-toolbar.registration.ts
import { headerToolbarRegistry } from '@/config/header-toolbar.registry';
import { Search, Bell } from 'lucide-react';

// Action button
headerToolbarRegistry.register({
  id: 'search',
  type: 'action',
  position: 'left',
  order: 10,
  icon: Search,
  label: 'Search',
  onClick: () => openSearchModal(),
});

// Dropdown with badge
headerToolbarRegistry.register({
  id: 'notifications',
  type: 'dropdown',
  position: 'right',
  order: 50,
  icon: Bell,
  label: 'Notifications',
  badge: 3,
  component: NotificationDropdown,
});

// Custom component
headerToolbarRegistry.register({
  id: 'theme-toggle',
  type: 'custom',
  position: 'right',
  order: 100,
  component: ThemeToggle,
});
```

### Toolbar Item Types

| Type | Description |
|------|-------------|
| `'action'` | Simple button with onClick |
| `'toggle'` | Toggle button with isActive state |
| `'dropdown'` | Button that opens dropdown menu |
| `'custom'` | Fully custom component |

### Toolbar Positions

- `'left'` - Centre of header (between breadcrumbs and right items)
- `'right'` - End of header

---

## Sidebar Components

### AppSidebar

The main sidebar automatically:
- Displays app logo/name from app settings
- Renders navigation from registries
- Applies admin overrides (hidden items, reordering)
- Shows user menu with avatar

### Collapsible Mode

The sidebar supports collapsible icon mode:

```tsx
<Sidebar collapsible="icon">
  {/* Content */}
</Sidebar>
```

### Navigation with Sub-items

```tsx
navigationRegistry.registerMain({
  id: 'settings',
  title: 'Settings',
  url: '/settings',
  icon: Settings,
  items: [
    { title: 'Profile', url: '/settings/profile' },
    { title: 'Preferences', url: '/settings/preferences' },
    { title: 'Security', url: '/settings/security' },
  ],
});
```

---

## Header Components

### SiteHeader

Contains:
- Sidebar toggle (mobile/collapse)
- Breadcrumbs (from route handles)
- Header toolbar items

### Breadcrumbs

Breadcrumbs are generated from route `handle.crumb`:

```tsx
// In routes.config.tsx
{
  path: '/projects/:id',
  element: <ProjectPage />,
  handle: { crumb: 'Project Details' },
}
```

---

## Theme Toggle

The built-in theme toggle:
- Switches between light/dark modes
- Persists preference to localStorage
- Syncs across tabs

```tsx
import { ThemeToggle } from '@/features/dashboard/components/header/ThemeToggle';

// Already registered in header-toolbar.registration.ts
// Position: right, Order: 100
```

---

## Using Registry Hooks

### Navigation Hooks

```tsx
import {
  useMainNavigation,
  useSecondaryNavigation,
  useUserMenuNavigation,
} from '@/config/registry.hooks';

function MyComponent() {
  const mainItems = useMainNavigation();
  const secondaryItems = useSecondaryNavigation();
  const userMenuItems = useUserMenuNavigation();

  // Items are automatically sorted by order
  // and filtered by admin overrides
}
```

### Widget Hooks

```tsx
import {
  useDashboardRegistry,
  useVisibleDashboardWidgets,
} from '@/config/registry.hooks';

function DashboardContent() {
  const allWidgets = useDashboardRegistry();
  const visibleWidgets = useVisibleDashboardWidgets(userPreferences);
}
```

### Toolbar Hooks

```tsx
import { useHeaderToolbarGrouped } from '@/config/registry.hooks';

function HeaderToolbar() {
  const { left, right } = useHeaderToolbarGrouped();
}
```

---

## Responsive Design

### Grid Layout

The dashboard grid adapts to screen size:

| Breakpoint | Columns |
|------------|---------|
| Desktop | 4 columns |
| Tablet | 2 columns |
| Mobile | 1 column |

### Container Queries

The main content area supports container queries:

```tsx
<main className="@container/main">
  {/* Use @container queries for responsive widgets */}
</main>
```

```css
.my-widget {
  @container/main (min-width: 600px) {
    /* Larger layout */
  }
}
```

---

## Troubleshooting

### Navigation Not Appearing

1. Verify registration file is imported in feature's `index.ts`
2. Check feature's `index.ts` is imported in app entry point
3. Confirm order values don't conflict
4. Check role requirements match current user

### Widgets Not Showing

1. Verify widget is registered with `dashboardRegistry`
2. Check user hasn't hidden it in preferences
3. Ensure component is exported correctly

### Toolbar Items Missing

1. Check registration in `headerToolbarRegistry`
2. Verify admin hasn't hidden it in toolbar overrides
3. Check position ('left' or 'right')

### Sidebar Logo Not Showing

1. Ensure `AppSettingsProvider` wraps dashboard
2. Check logo was uploaded in Admin → App Settings
3. Verify logo display mode isn't 'name-only'

---

## Next Steps

- [Registries Reference](/starter-template/registries/) - Full registry API
- [Admin Feature](/starter-template/admin-feature/) - Customise navigation/toolbar
- [User Feature](/starter-template/user-feature/) - Widget preferences
